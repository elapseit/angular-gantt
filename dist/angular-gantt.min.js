/*
Project: angular-gantt v1.3.0 - Gantt chart component for AngularJS
Authors: Marco Schweighauser, RÃ©mi Alvergnat
License: MIT
Homepage: https://www.angular-gantt.com
Github: https://github.com/angular-gantt/angular-gantt.git
*/

!function(){"use strict";angular.module("gantt",["gantt.templates","angularMoment"]).directive("gantt",["Gantt","ganttEnableNgAnimate","$timeout","$templateCache",function(t,e,i,n){return{restrict:"A",transclude:!0,templateUrl:function(t,e){var i;return i=void 0===e.templateUrl?"template/gantt.tmpl.html":e.templateUrl,void 0!==e.template&&n.put(i,e.template),i},scope:{sortMode:"=?",filterTask:"=?",filterTaskComparator:"=?",filterRow:"=?",filterRowComparator:"=?",viewScale:"=?",columnWidth:"=?",expandToFit:"=?",shrinkToFit:"=?",showSide:"=?",allowSideResizing:"=?",fromDate:"=?",toDate:"=?",currentDateValue:"=?",currentDate:"=?",daily:"=?",autoExpand:"=?",taskOutOfRange:"=?",taskContent:"=?",rowContent:"=?",maxHeight:"=?",sideWidth:"=?",headers:"=?",headersFormats:"=?",headersScales:"=?",timeFrames:"=?",dateFrames:"=?",timeFramesWorkingMode:"=?",timeFramesNonWorkingMode:"=?",timespans:"=?",columnMagnet:"=?",shiftColumnMagnet:"=?",timeFramesMagnet:"=?",data:"=?",api:"=?",options:"=?"},controller:["$scope","$element",function(i,n){for(var s in i.options)i[s]=i.options[s];e(n,!1),i.gantt=new t(i,n),this.gantt=i.gantt}],link:function(t,e){t.gantt.api.directives.raise.new("gantt",t,e),t.$on("$destroy",function(){t.gantt.api.directives.raise.destroy("gantt",t,e)}),i(function(){t.gantt.initialized()})}}}])}(),function(){"use strict";angular.module("gantt").factory("GanttApi",["$q","$rootScope","ganttUtils",function(t,e,i){var n=function(t){this.gantt=t,this.listeners=[],this.apiId=i.newId()};function s(t,i,n,s){return e.$on(t,function(){var t=Array.prototype.slice.call(arguments);t.splice(0,1),i.apply(s||n.api,t)})}return n.prototype.suppressEvents=function(t,e){var i=this,n=angular.isArray(t)?t:[t],a=[];n.forEach(function(t){a=i.listeners.filter(function(e){return t===e.handler})}),a.forEach(function(t){t.dereg()}),e(),a.forEach(function(t){t.dereg=s(t.eventId,t.handler,i.gantt,t._this)})},n.prototype.registerEvent=function(t,i){var n=this;n[t]||(n[t]={});var a=n[t];a.on||(a.on={},a.raise={});var o="event:gantt:"+this.apiId+":"+t+":"+i;a.raise[i]=function(){e.$emit.apply(e,[o].concat(Array.prototype.slice.call(arguments)))},a.on[i]=function(t,e,i){var a={handler:e,dereg:s(o,e,n.gantt,i),eventId:o,scope:t,_this:i};n.listeners.push(a);var r=function(){a.dereg();var t=n.listeners.indexOf(a);n.listeners.splice(t,1)};return t.$on("$destroy",function(){r()}),r}},n.prototype.registerEventsFromObject=function(t){var e=this,i=[];angular.forEach(t,function(t,e){var n={name:e,events:[]};angular.forEach(t,function(t,e){n.events.push(e)}),i.push(n)}),i.forEach(function(t){t.events.forEach(function(i){e.registerEvent(t.name,i)})})},n.prototype.registerMethod=function(t,e,n,s){this[t]||(this[t]={}),this[t][e]=i.createBoundedWrapper(s||this.gantt,n)},n.prototype.registerMethodsFromObject=function(t,e){var i=this,n=[];angular.forEach(t,function(t,e){var i={name:e,methods:[]};angular.forEach(t,function(t,e){i.methods.push({name:e,fn:t})}),n.push(i)}),n.forEach(function(t){t.methods.forEach(function(n){i.registerMethod(t.name,n.name,n.fn,e)})})},n}])}(),function(){"use strict";angular.module("gantt").factory("GanttOptions",[function(){return function(t,e){this.defaultValues=e,this.values=t,this.defaultValue=function(t){var e=this.defaultValues[t];return angular.isFunction(e)&&(e=e()),e},this.sanitize=function(t,e){if(!e){var i=this.defaultValue(t);if(void 0!==i)return void 0!==e&&"boolean"==typeof i?e:i}return e},this.value=function(t){return this.sanitize(t,this.values[t])},this.set=function(t,e){this.values[t]=e},this.initialize=function(){for(var t in this.values){var e=this.values[t];this.values.hasOwnProperty(t)&&(this.values[t]=this.value(t,e))}return this.values}}}])}(),function(){"use strict";angular.module("gantt").factory("GanttCalendar",["$filter","moment",function(t,e){var i=function(t){void 0===t&&(t={}),this.start=t.start,this.end=t.end,this.working=t.working,this.magnet=void 0===t.magnet||t.magnet,this.default=t.default,this.color=t.color,this.classes=t.classes,this.internal=t.internal};i.prototype.updateView=function(){if(this.$element){var t={};void 0!==this.left?t.left=this.left+"px":t.left="",void 0!==this.width?t.width=this.width+"px":t.width="",void 0!==this.color?t["background-color"]=this.color:t["background-color"]="",this.$element.css(t);var e=["gantt-timeframe"+(this.working?"":"-non")+"-working"];this.classes&&(e=e.concat(this.classes));for(var i=0,n=e.length;i<n;i++)this.$element.toggleClass(e[i],!0)}},i.prototype.getDuration=function(){if(void 0!==this.end&&void 0!==this.start)return this.end.diff(this.start,"milliseconds")},i.prototype.clone=function(){return new i(this)};var n=function(t){this.func=t};n.prototype.getTimeFrames=function(t){var e=this.func(t);return e instanceof Array||(e=[e]),e},n.prototype.clone=function(){return new n(this.func)};var s=function(t){this.evaluator=t.evaluator,t.date?(this.start=e(t.date).startOf("day"),this.end=e(t.date).endOf("day")):(this.start=t.start,this.end=t.end),t.targets instanceof Array?this.targets=t.targets:this.targets=[t.targets],this.default=t.default,this.holidayId=t.holidayId,this.holidayLocations=t.holidayLocations};s.prototype.dateMatch=function(t){return this.evaluator?this.evaluator(t):!(!this.start||!this.end)&&(t>=this.start&&t<=this.end)},s.prototype.clone=function(){return new s(this)};var a=function(){this.timeFrames={},this.timeFrameMappings={},this.dateFrames={}};a.prototype.clear=function(){this.timeFrames={},this.timeFrameMappings={},this.dateFrames={}},a.prototype.registerTimeFrames=function(t){angular.forEach(t,function(t,e){this.timeFrames[e]=new i(t)},this)},a.prototype.removeTimeFrames=function(t){angular.forEach(t,function(t){delete this.timeFrames[t]},this)},a.prototype.clearTimeFrames=function(){this.timeFrames={}},a.prototype.registerTimeFrameMappings=function(t){angular.forEach(t,function(t,e){this.timeFrameMappings[e]=new n(t)},this)},a.prototype.removeTimeFrameMappings=function(t){angular.forEach(t,function(t){delete this.timeFrameMappings[t]},this)},a.prototype.clearTimeFrameMappings=function(){this.timeFrameMappings={}},a.prototype.registerDateFrames=function(t){angular.forEach(t,function(t,e){this.dateFrames[e]=new s(t)},this)},a.prototype.removeDateFrames=function(t){angular.forEach(t,function(t){delete this.dateFrames[t]},this)},a.prototype.clearDateFrames=function(){this.dateFrames={}};return a.prototype.getTimeFrames=function(t){for(var i=[],n=function(t,e){var i=[];return angular.forEach(t,function(t){t.dateMatch(e)&&i.push(t)}),0===i.length&&angular.forEach(t,function(t){t.default&&i.push(t)}),i}(this.dateFrames,t),s=0;s<n.length;s++)if(void 0!==n[s])for(var a=n[s].targets,o=0;o<a.length;o++){var r=this.timeFrameMappings[a[o]];if(void 0!==r){var l=r.getTimeFrames();l.holidayId=n[s].holidayId,l.holidayLocations=n[s].holidayLocations,i.push(l)}else{var d=this.timeFrames[a[o]];void 0!==d&&(d.holidayId=n[s].holidayId,d.holidayLocations=n[s].holidayLocations,i.push(d))}}var h=t.year(),u=t.month(),c=t.date(),g=[];for(0===i.length&&angular.forEach(this.timeFrames,function(t){t.default&&i.push(t)}),s=0;s<i.length;s++){var m=i[s].clone();m.holidayId=i[s].holidayId,m.holidayLocations=i[s].holidayLocations,void 0!==m.start&&(m.start.year(h),m.start.month(u),m.start.date(c)),void 0!==m.end&&(m.end.year(h),m.end.month(u),m.end.date(c),e(m.end).startOf("day")===m.end&&m.end.add(1,"day")),g.push(m)}return g},a.prototype.solve=function(n,s,a){for(var o,r,l,d,h=0;h<n.length;h++){var u=n[h];(void 0===l||l>u.start)&&(l=u.start),(void 0===d||d<u.end)&&(d=u.end),void 0===o&&u.color&&(o=u.color),void 0!==u.classes&&(void 0===r&&(r=[]),r=r.concat(u.classes))}void 0===s&&(s=l),void 0===a&&(a=d);var c=[new i({start:s,end:a,internal:!0})];for(n=t("filter")(n,function(t){return(void 0===t.start||t.start<a)&&(void 0===t.end||t.end>s)}),h=0;h<n.length;h++){var g=n[h];g.start||(g.start=s),g.end||(g.end=a)}var m,p=t("orderBy")(n,function(t){return-t.getDuration()});for(h=0;h<p.length;h++){var f=p[h],v=c.slice();m=0;for(var w=!1,y=!1,k=0;k<c.length;k++){var M=c[k];if(!y){if(f.end||f.start)if(f.end>M.start&&f.start<M.end){var b=M.clone();b.holidayId=M.holidayId,b.holidayLocations=M.holidayLocations,M.end=e(f.start),b.start=e(f.end),($=f.clone()).holidayId=f.holidayId,$.holidayLocations=f.holidayLocations,v.splice(m+1,0,$,b),y=!0,w=!1}else if(!w&&f.start<M.end){var $;M.end=e(f.start),($=f.clone()).holidayId=f.holidayId,$.holidayLocations=f.holidayLocations,v.splice(m+1,0,$),w=!0}else w&&f.end>M.start&&(M.start=e(f.end),w=!1,y=!0);else v.splice(m,0,f),y=!0,w=!1;m++}}c=v}return c=t("filter")(c,function(t){return!t.internal&&(void 0===t.start||t.start<a)&&(void 0===t.end||t.end>s)})},a}])}(),function(){"use strict";angular.module("gantt").factory("GanttCurrentDateManager",["moment",function(t){var e=function(e){var i=this;this.gantt=e,this.date=void 0,this.position=void 0,this.currentDateColumn=void 0,this.gantt.$scope.simplifyMoment=function(e){return t.isMoment(e)?e.unix():e},this.gantt.$scope.$watchGroup(["currentDate","simplifyMoment(currentDateValue)"],function(t,e){t!==e&&i.setCurrentDate(i.gantt.options.value("currentDateValue"))})};return e.prototype.setCurrentDate=function(t){this.date=t;var e,i=this.currentDateColumn;void 0!==this.date&&"column"===this.gantt.options.value("currentDate")&&(e=this.gantt.columnsManager.getColumnByDate(this.date,!0)),this.currentDateColumn=e,i!==e&&(void 0!==i&&(i.currentDate=!1,i.updateView()),void 0!==e&&(e.currentDate=!0,e.updateView())),this.position=this.gantt.getPositionByDate(this.date,!0)},e}])}(),function(){"use strict";angular.module("gantt").factory("GanttColumn",["moment",function(t){var e=function(t,e,i,n,s,a,o){this.date=t,this.endDate=e,this.left=i,this.width=n,this.calendar=s,this.duration=this.endDate.diff(this.date,"milliseconds"),this.timeFramesWorkingMode=a,this.timeFramesNonWorkingMode=o,this.timeFrames=[],this.currentDate=!1,this.visibleTimeFrames=[],this.daysTimeFrames={},this.cropped=!1,this.originalSize={left:this.left,width:this.width},this.updateTimeFrames()},i=function(t){return t.year()+"-"+t.month()+"-"+t.date()};return e.prototype.updateView=function(){if(this.$element){this.currentDate?this.$element.addClass("gantt-foreground-col-current-date"):this.$element.removeClass("gantt-foreground-col-current-date"),this.$element.css({left:this.left+"px",width:this.width+"px"});for(var t=0,e=this.timeFrames.length;t<e;t++)this.timeFrames[t].updateView()}},e.prototype.updateTimeFrames=function(){if(void 0!==this.calendar&&("hidden"!==this.timeFramesNonWorkingMode||"hidden"!==this.timeFramesWorkingMode)){for(var e,n=this.date,s=t(n).startOf("day"),a=s.add(1,"day");n<this.endDate;){var o=this.calendar.getTimeFrames(n),r=t.min(a,this.endDate);o=this.calendar.solve(o,n,r);var l=[];for(e=0;e<o.length;e++){var d=o[e],h=d.start;void 0===h&&(h=n);var u=d.end;void 0===u&&(u=r),h<this.date&&(h=this.date),u>this.endDate&&(u=this.endDate);var c=d.holidayId,g=d.holidayLocations;(d=d.clone()).holidayId=c,d.holidayLocations=g,d.start=t(h),d.end=t(u),l.push(d)}this.timeFrames=this.timeFrames.concat(l);var m=i(n);this.daysTimeFrames[m]=l,a=(s=t(n=r).startOf("day")).add(1,"day")}for(e=0;e<this.timeFrames.length;e++){var p=this.timeFrames[e],f=p.start.diff(this.date,"milliseconds")/this.duration*this.width,v=p.end.diff(p.start,"milliseconds")/this.duration*this.width,w=!1;p.working&&"visible"!==this.timeFramesWorkingMode?w=!0:p.working||"visible"===this.timeFramesNonWorkingMode||(w=!0),w||this.visibleTimeFrames.push(p),p.hidden=w,p.left=f,p.width=v,p.originalSize={left:p.left,width:p.width}}if("cropped"===this.timeFramesNonWorkingMode||"cropped"===this.timeFramesWorkingMode){for(var y=0,k=0;k<this.timeFrames.length;k++){var M=this.timeFrames[k];(!M.working&&"cropped"!==this.timeFramesNonWorkingMode||M.working&&"cropped"!==this.timeFramesWorkingMode)&&(y+=M.width)}if(y!==this.width){var b=this.width/y,$=0,C=0,F=!0;for(k=0;k<this.timeFrames.length;k++){var T=this.timeFrames[k];!T.working&&"cropped"!==this.timeFramesNonWorkingMode||T.working&&"cropped"!==this.timeFramesWorkingMode?(T.left=(T.left-$)*b,T.width=T.width*b,T.originalSize.left=(T.originalSize.left-C)*b,T.originalSize.width=T.originalSize.width*b,T.cropped=!1,F=!1):($+=T.width,C+=T.originalSize.width,T.left=void 0,T.width=0,T.originalSize={left:void 0,width:0},T.cropped=!0)}this.cropped=F}else this.cropped=!1}}},e.prototype.clone=function(){return new e(t(this.date),t(this.endDate),this.left,this.width,this.calendar)},e.prototype.containsDate=function(t){return t>this.date&&t<=this.endDate},e.prototype.equals=function(t){return this.date===t.date},e.prototype.roundTo=function(t,e,i,n){"day"===e&&(e="date"),i=i||1;var s=t.get(e);switch(n){case"up":s=Math.ceil(s/i);break;case"down":s=Math.floor(s/i);break;default:s=Math.round(s/i)}var a=["millisecond","second","minute","hour","date","month","year"];t.set(e,s*i);for(var o=a.indexOf(e),r=0;r<o;r++)t.set(a[r],0);return t},e.prototype.getMagnetDate=function(e,i,n,s){if(i>0&&void 0!==n){var a=e;if(e=t(e),"column"===n)e=this.getPositionByDate(e)<this.width/2?t(this.date):t(this.endDate);else(e=this.roundTo(e,n,i))<this.date?e=t(this.date):e>this.endDate&&(e=t(this.endDate));if(s)for(var o,r=Math.abs(a.diff(e,"milliseconds")),l=0;l<this.timeFrames.length;l++){var d=this.timeFrames[l];if(d.magnet){var h,u=this.timeFrames[l-1],c=this.timeFrames[l+1];void 0!==u&&u.working===d.working||(h=Math.abs(a.diff(d.start,"milliseconds")))<r&&(void 0===o||h<o)&&(o=h,e=d.start),void 0!==c&&c.working===d.working||(h=Math.abs(a.diff(d.end,"milliseconds")))<r&&(void 0===o||h<o)&&(o=h,e=d.end)}}}return e},e.prototype.getDateByPositionUsingTimeFrames=function(e){for(var i=0,n=this.timeFrames.length;i<n;i++){var s=this.timeFrames[i];if(!s.cropped&&e>=s.left&&e<=s.left+s.width){var a=s.getDuration()/s.width*(e-s.left);return t(s.start).add(a,"milliseconds")}}},e.prototype.getDateByPosition=function(e,i,n,s){var a,o;return e<0&&(e=0),e>this.width&&(e=this.width),"cropped"!==this.timeFramesNonWorkingMode&&"cropped"!==this.timeFramesWorkingMode||(o=this.getDateByPositionUsingTimeFrames(e)),void 0===o&&(a=this.duration/this.width*e,o=t(this.date).add(a,"milliseconds")),o=this.getMagnetDate(o,i,n,s)},e.prototype.getDayTimeFrame=function(t){var e=this.daysTimeFrames[i(t)];return void 0===e?[]:e},e.prototype.getPositionByDate=function(t){var e;if("cropped"===this.timeFramesNonWorkingMode||"cropped"===this.timeFramesWorkingMode)for(var i=t,n=this.getDayTimeFrame(i),s=0;s<n.length;s++){var a=n[s];if(i>a.start&&i<a.end){if(!a.cropped)return e=i.diff(a.start,"milliseconds")/a.getDuration()*a.width,this.left+a.left+e;i=n.length>s+1?n[s+1].start:a.end}}return(e=t.diff(this.date,"milliseconds")/this.duration*this.width)<0&&(e=0),e>this.width&&(e=this.width),this.left+e},e}])}(),function(){"use strict";angular.module("gantt").factory("GanttColumnBuilder",["GanttColumn",function(t){var e=function(t){this.columnsManager=t};return e.prototype.newColumn=function(e,i,n,s){var a=this.columnsManager.gantt.calendar,o=this.columnsManager.gantt.options.value("timeFramesWorkingMode"),r=this.columnsManager.gantt.options.value("timeFramesNonWorkingMode");return new t(e,i,n,s,a,o,r)},e}])}(),function(){"use strict";angular.module("gantt").service("GanttColumnGenerator",["moment",function(t){var e=function(e,i,n){return t(e).add(i,n).startOf(n)===e},i=function(t,e,i){var n=e.get(t),s=i.get(t),a=function(t){if(["hour","minute","second","millisecond"].indexOf(t)>=0)return 0}(t);void 0!==a&&s!==a&&s<n&&i.set(t,a)};this.generate=function(n,s,a,o,r,l,d,h){if(!a&&!l)throw"to or maximumWidth must be defined";var u,c,g;"s"===(o=o.trim()).charAt(o.length-1)&&(o=o.substring(0,o.length-1)),o&&(g=o.split(" ")),g&&g.length>1?(u=parseFloat(g[0]),c=g[g.length-1]):(u=1,c=o);var m=!1;s=t(s).startOf(c),a&&(m=e(a),a=t(a).startOf(c));var p=0,f=t(s).startOf(c);h&&(f.add(-u,c),p-=r);for(var v=[];!(l&&Math.abs(p)>l+r);){var w=t(f),y=t(w).add(u,c);i(c,w,y);var k=n.newColumn(w,y,d?p+d:p,r);if(k.cropped||(v.push(k),h?p-=r:p+=r),a)if(h){if(m&&f<a||!m&&f<=a)break}else if(m&&f>a||!m&&f>=a)break;h?(f.add(-u,c),i(c,f,w)):(f.add(u,c),i(c,w,f))}return h&&(e(s,u,c)&&v.shift(),v.reverse()),v}}])}(),function(){"use strict";angular.module("gantt").factory("GanttColumnHeader",["moment","GanttColumn",function(t,e){return function(i,n,s,a,o,r){i=t(i),n=t(n);var l=new e(i,n,a,o);return l.unit=s,l.label=angular.isFunction(r)?r(l):i.format(r),l}}])}(),function(){"use strict";angular.module("gantt").factory("GanttColumnsManager",["GanttColumnGenerator","GanttColumnBuilder","GanttHeadersGenerator","$filter","$timeout","ganttLayout","ganttBinarySearch","moment",function(t,e,i,n,s,a,o,r){var l=function(t){var i=this;this.gantt=t,this.from=void 0,this.to=void 0,this.columns=[],this.visibleColumns=[],this.previousColumns=[],this.nextColumns=[],this.headers=[],this.visibleHeaders=[],this.scrollAnchor=void 0,this.columnBuilder=new e(this),this.gantt.$scope.$watchGroup(["viewScale","columnWidth","timeFramesWorkingMode","timeFramesNonWorkingMode","fromDate","toDate","autoExpand","taskOutOfRange"],function(t,e){t!==e&&i.gantt.rendered&&i.generateColumns()}),this.gantt.$scope.$watchCollection("headers",function(t,e){t!==e&&i.gantt.rendered&&i.generateColumns()}),this.gantt.$scope.$watchCollection("headersFormats",function(t,e){t!==e&&i.gantt.rendered&&i.generateColumns()}),this.gantt.$scope.$watchGroup(["ganttElementWidth","showSide","sideWidth","maxHeight","daily"],function(t,e){t!==e&&i.gantt.rendered&&i.updateColumnsMeta()}),this.gantt.api.data.on.load(this.gantt.$scope,function(){(void 0===i.from||void 0===i.to||i.from>i.gantt.rowsManager.getDefaultFrom()||i.to<i.gantt.rowsManager.getDefaultTo())&&i.gantt.rendered&&i.generateColumns(),i.gantt.rowsManager.sortRows()}),this.gantt.api.data.on.remove(this.gantt.$scope,function(){i.gantt.rowsManager.sortRows()}),this.gantt.api.registerMethod("columns","clear",this.clearColumns,this),this.gantt.api.registerMethod("columns","generate",this.generateColumns,this),this.gantt.api.registerMethod("columns","refresh",this.updateColumnsMeta,this),this.gantt.api.registerMethod("columns","getColumnsWidth",this.getColumnsWidth,this),this.gantt.api.registerMethod("columns","getColumnsWidthToFit",this.getColumnsWidthToFit,this),this.gantt.api.registerMethod("columns","getDateRange",this.getDateRange,this),this.gantt.api.registerEvent("columns","clear"),this.gantt.api.registerEvent("columns","generate"),this.gantt.api.registerEvent("columns","refresh")};l.prototype.setScrollAnchor=function(){if(this.gantt.scroll.$element&&this.columns.length>0){var t=this.gantt.scroll.$element[0],e=t.scrollLeft+t.offsetWidth/2;this.scrollAnchor=this.gantt.getDateByPosition(e)}},l.prototype.scrollToScrollAnchor=function(){var t=this;this.columns.length>0&&void 0!==this.scrollAnchor&&this.gantt.$scope.$$postDigest(function(){t.gantt.api.scroll.toDate(t.scrollAnchor)})},l.prototype.clearColumns=function(){this.setScrollAnchor(),this.from=void 0,this.to=void 0,this.columns=[],this.visibleColumns=[],this.previousColumns=[],this.nextColumns=[],this.headers=[],this.visibleHeaders=[],this.gantt.api.columns.raise.clear()},l.prototype.generateColumns=function(e,n){return e||(e=this.gantt.options.value("fromDate")),n||(n=this.gantt.options.value("toDate")),!((!e||r.isMoment(e)&&!e.isValid())&&!(e=this.gantt.rowsManager.getDefaultFrom()))&&(!((!n||r.isMoment(n)&&!n.isValid())&&!(n=this.gantt.rowsManager.getDefaultTo()))&&(void 0===e||r.isMoment(e)||(e=r(e)),void 0===n||r.isMoment(n)||(n=r(n)),"expand"===this.gantt.options.value("taskOutOfRange")&&(e=this.gantt.rowsManager.getExpandedFrom(e),n=this.gantt.rowsManager.getExpandedTo(n)),this.setScrollAnchor(),this.from=e,this.to=n,this.columns=t.generate(this.columnBuilder,e,n,this.gantt.options.value("viewScale"),this.getColumnsWidth()),this.headers=i.generate(this),this.previousColumns=[],this.nextColumns=[],this.updateColumnsMeta(),this.scrollToScrollAnchor(),void this.gantt.api.columns.raise.generate(this.columns,this.headers)))},l.prototype.updateColumnsMeta=function(){this.gantt.isRefreshingColumns=!0;var t=this.getLastColumn();this.gantt.originalWidth=void 0!==t?t.originalSize.left+t.originalSize.width:0;var e=this.updateColumnsWidths(this.columns,this.headers,this.previousColumns,this.nextColumns);this.gantt.width=void 0!==t?t.left+t.width:0;var i=this.gantt.options.value("showSide"),n=i!==this.gantt.side.isShown();n&&!i&&this.gantt.side.show(!1),this.gantt.rowsManager.updateTasksPosAndSize(),this.gantt.timespansManager.updateTimespansPosAndSize(),this.updateVisibleColumns(e),this.gantt.rowsManager.updateVisibleObjects();var s=this.gantt.options.value("currentDateValue");this.gantt.currentDateManager.setCurrentDate(s),n&&i&&this.gantt.side.show(!0),this.gantt.isRefreshingColumns=!1,this.gantt.api.columns.raise.refresh(this.columns,this.headers)},l.prototype.getLastColumn=function(t){var e=this.columns;return t&&(e=this.nextColumns),e&&e.length>0?e[e.length-1]:void 0},l.prototype.getFirstColumn=function(t){var e=this.columns;return t&&(e=this.previousColumns),e&&e.length>0?e[0]:void 0},l.prototype.getColumnByDate=function(t,e){e||this.expandExtendedColumnsForDate(t);var i=this.previousColumns.concat(this.columns,this.nextColumns),n=o.get(i,t,function(t){return t.date},!0);return void 0===n[0]?n[1]:n[0]},l.prototype.getColumnByPosition=function(t,e){e||this.expandExtendedColumnsForPosition(t);var i=this.previousColumns.concat(this.columns,this.nextColumns),n=o.get(i,t,function(t){return t.left},!0);return void 0===n[0]?n[1]:n[0]},l.prototype.updateColumnsWidths=function(t,e,i,n){var s=this.gantt.options.value("columnWidth"),o=this.gantt.options.value("expandToFit"),r=this.gantt.options.value("shrinkToFit");if(void 0===s||o||r){var l=this.gantt.getBodyAvailableWidth(),d=this.gantt.columnsManager.getLastColumn(!1);if(void 0!==d){var h=d.originalSize.left+d.originalSize.width;if(o&&h<l||r&&h>l||void 0===s){var u=l/h;a.setColumnsWidthFactor(t,u);for(var c=0;c<e.length;c++)a.setColumnsWidthFactor(e[c],u);return i.splice(0,this.previousColumns.length),n.splice(0,this.nextColumns.length),!0}}}return!1},l.prototype.getColumnsWidth=function(){var t=this.gantt.options.value("columnWidth");return void 0===t&&(t=!this.gantt.width||this.gantt.width<=0?20:this.gantt.width/this.columns.length),t},l.prototype.getColumnsWidthToFit=function(){return this.gantt.getBodyAvailableWidth()/this.columns.length},l.prototype.expandExtendedColumnsForPosition=function(e){var i;if(e<0){var n=this.getFirstColumn().date,s=this.getFirstColumn(!0);return(!s||s.left>e)&&(i=this.gantt.options.value("viewScale"),this.previousColumns=t.generate(this.columnBuilder,n,void 0,i,this.getColumnsWidth(),-e,0,!0)),!0}if(e>this.gantt.width){var a=this.getLastColumn(),o=a.getDateByPosition(a.width),r=this.getLastColumn(!0);return(!r||r.left+r.width<e)&&(i=this.gantt.options.value("viewScale"),this.nextColumns=t.generate(this.columnBuilder,o,void 0,i,this.getColumnsWidth(),e-this.gantt.width,this.gantt.width,!1)),!0}return!1},l.prototype.expandExtendedColumnsForDate=function(e){var i,n=this.getFirstColumn();n&&(i=n.date);var s,a,o=this.getLastColumn();if(o&&(s=o.getDateByPosition(o.width)),i&&e<i){var r=this.getFirstColumn(!0);return(!r||r.date>e)&&(a=this.gantt.options.value("viewScale"),this.previousColumns=t.generate(this.columnBuilder,i,e,a,this.getColumnsWidth(),void 0,0,!0)),!0}if(s&&e>=s){var l=this.getLastColumn(!0);return(!l||l.date<s)&&(a=this.gantt.options.value("viewScale"),this.nextColumns=t.generate(this.columnBuilder,s,e,a,this.getColumnsWidth(),void 0,this.gantt.width,!1)),!0}return!1},l.prototype.getActiveHeadersCount=function(){return this.headers.length},l.prototype.updateVisibleColumns=function(t){this.visibleColumns=n("ganttColumnLimit")(this.columns,this.gantt),this.visibleHeaders=[];for(var e=0;e<this.headers.length;e++)this.visibleHeaders.push(n("ganttColumnLimit")(this.headers[e],this.gantt));if(t){for(e=0;e<this.visibleColumns.length;e++)this.visibleColumns[e].updateView();for(e=0;e<this.visibleHeaders.length;e++)for(var i=this.visibleHeaders[e],s=0;s<i.length;s++)i[s].updateView()}var a=this.gantt.options.value("currentDateValue");this.gantt.currentDateManager.setCurrentDate(a)};var d={year:"YYYY",quarter:"[Q]Q YYYY",month:"MMMM YYYY",week:"w",day:"D",hour:"H",minute:"HH:mm"},h={day:"LL",hour:"H",minute:"HH:mm"},u={year:"YYYY",quarter:"[Q]Q",month:"MMMM"};return l.prototype.getHeaderFormat=function(t){var e,i=this.gantt.options.value("headersFormats");if(void 0!==i&&(e=i[t]),void 0===e){var n,s,a=this.gantt.options.value("viewScale");"s"===(a=a.trim()).charAt(a.length-1)&&(a=a.substring(0,a.length-1)),a&&(s=a.split(" ")),n=s&&s.length>1?s[s.length-1]:a,["millisecond","second","minute","hour"].indexOf(n)>-1?e=h[t]:["month","quarter","year"].indexOf(n)>-1&&(e=u[t]),void 0===e&&(e=d[t])}return e},l.prototype.getHeaderScale=function(t){var e,i=this.gantt.options.value("headersScales");return void 0!==i&&(e=i[t]),void 0===e&&(e=t),-1===["second","minute","hour","day","week","month","quarter","year"].indexOf(e)&&(e="day"),e},l.prototype.getDateRange=function(t){var e,i;return t?this.visibleColumns&&this.visibleColumns.length>0&&(e=this.visibleColumns[0],i=this.visibleColumns[this.visibleColumns.length-1]):(e=this.getFirstColumn(),i=this.getLastColumn()),e&&i?[e.date,i.endDate]:void 0},l}])}(),function(){"use strict";angular.module("gantt").service("GanttHeadersGenerator",["GanttColumnHeader","moment",function(t,e){var i=function(i,n){var s,a,o,r,l=[],d=i.getHeaderScale(n);d&&(r=d.split(" ")),r&&r.length>1?(a=parseFloat(r[0]),o=r[r.length-1]):(a=1,o=d);for(var h=i.columns[0],u=e(h.date).startOf(o),c=e(i.columns[i.columns.length-1].endDate);;){var g=h.getPositionByDate(u),m=e.min(e(u).add(a,o),c),p=i.getColumnByDate(m,!0),f=p.getPositionByDate(m)-g;if(f>0){var v=i.getHeaderFormat(n);s=new t(u,m,o,g,f,v),l.push(s)}if(m.isSame(c)||m.isAfter(c))break;h=p,u=m}return l};this.generate=function(t){var e=[];if(void 0===t.gantt.options.value("headers")){var n,s,a=t.gantt.options.value("viewScale");"s"===(a=a.trim()).charAt(a.length-1)&&(a=a.substring(0,a.length-1)),a&&(s=a.split(" ")),n=s&&s.length>1?s[s.length-1]:a,["quarter","month"].indexOf(n)>-1&&e.push("year"),["day","week"].indexOf(n)>-1&&e.push("month"),["day"].indexOf(n)>-1&&e.push("week"),["hour"].indexOf(n)>-1&&e.push("day"),["minute","second"].indexOf(n)>-1&&e.push("hour"),["second"].indexOf(n)>-1&&e.push("minute"),e.push(a)}else e=t.gantt.options.value("headers");for(var o=[],r=0;r<e.length;r++)o.push(i(t,e[r]));return o}}])}(),function(){"use strict";angular.module("gantt").factory("Gantt",["GanttApi","GanttOptions","GanttCalendar","GanttScroll","GanttBody","GanttRowHeader","GanttHeader","GanttSide","GanttObjectModel","GanttRowsManager","GanttColumnsManager","GanttTimespansManager","GanttCurrentDateManager","ganttArrays","moment","$document","$timeout",function(t,e,i,n,s,a,o,r,l,d,h,u,c,g,m,p,f){var v=function(a,f){var v=this;this.$scope=a,this.$element=f,this.options=new e(a,{api:angular.noop,data:[],timespans:[],viewScale:"day",columnMagnet:"15 minutes",timeFramesMagnet:!0,showSide:!0,allowSideResizing:!0,currentDate:"line",currentDateValue:m,autoExpand:"none",taskOutOfRange:"truncate",taskContent:"{{task.model.name}}",rowContent:"{{row.model.name}}",maxHeight:0,timeFrames:[],dateFrames:[],timeFramesWorkingMode:"hidden",timeFramesNonWorkingMode:"visible"}),this.api=new t(this),this.api.registerEvent("core","ready"),this.api.registerEvent("core","rendered"),this.api.registerEvent("directives","controller"),this.api.registerEvent("directives","preLink"),this.api.registerEvent("directives","postLink"),this.api.registerEvent("directives","new"),this.api.registerEvent("directives","destroy"),this.api.registerEvent("data","change"),this.api.registerEvent("data","load"),this.api.registerEvent("data","remove"),this.api.registerEvent("data","clear"),this.api.registerMethod("core","getDateByPosition",this.getDateByPosition,this),this.api.registerMethod("core","getPositionByDate",this.getPositionByDate,this),this.api.registerMethod("data","load",this.loadData,this),this.api.registerMethod("data","remove",this.removeData,this),this.api.registerMethod("data","clear",this.clearData,this),this.api.registerMethod("data","get",this.getData,this),this.calendar=new i(this),this.calendar.registerTimeFrames(this.options.value("timeFrames")),this.calendar.registerDateFrames(this.options.value("dateFrames")),this.api.registerMethod("timeframes","registerTimeFrames",this.calendar.registerTimeFrames,this.calendar),this.api.registerMethod("timeframes","clearTimeframes",this.calendar.clearTimeFrames,this.calendar),this.api.registerMethod("timeframes","registerDateFrames",this.calendar.registerDateFrames,this.calendar),this.api.registerMethod("timeframes","clearDateFrames",this.calendar.clearDateFrames,this.calendar),this.api.registerMethod("timeframes","registerTimeFrameMappings",this.calendar.registerTimeFrameMappings,this.calendar),this.api.registerMethod("timeframes","clearTimeFrameMappings",this.calendar.clearTimeFrameMappings,this.calendar),a.$watchGroup(["timeFrames","dateFrames"],function(t,e){if(t!==e){var i=t[0],n=t[1],s=e[0],a=e[1],o=!1;angular.equals(i,s)||(v.calendar.clearTimeFrames(),v.calendar.registerTimeFrames(i),o=!0),angular.equals(n,a)||(v.calendar.clearDateFrames(),v.calendar.registerDateFrames(n),o=!0),o&&v.columnsManager.generateColumns()}}),a.$watch("columnMagnet",function(){var t,e=v.options.value("columnMagnet");e&&(t=e.trim().split(" ")),t&&t.length>1?(v.columnMagnetValue=parseFloat(t[0]),v.columnMagnetUnit=m.normalizeUnits(t[t.length-1])):(v.columnMagnetValue=1,v.columnMagnetUnit=m.normalizeUnits(e))}),a.$watchGroup(["shiftColumnMagnet","viewScale"],function(){var t,e=v.options.value("shiftColumnMagnet");e&&(t=e.trim().split(" ")),void 0!==t&&t.length>1?(v.shiftColumnMagnetValue=parseFloat(t[0]),v.shiftColumnMagnetUnit=m.normalizeUnits(t[t.length-1])):(v.shiftColumnMagnetValue=1,v.shiftColumnMagnetUnit=m.normalizeUnits(e))});var w=function(t){return v.shiftKey=t.shiftKey,!0};p.on("keyup keydown",w),a.$on("$destroy",function(){p.off("keyup keydown",w)}),this.scroll=new n(this),this.body=new s(this),this.header=new o(this),this.side=new r(this),this.objectModel=new l(this.api),this.rowsManager=new d(this),this.columnsManager=new h(this),this.timespansManager=new u(this),this.currentDateManager=new c(this),this.originalWidth=0,this.width=0,angular.isFunction(this.$scope.api)&&this.$scope.api(this.api);a.$watchCollection("data",function(t,e){if(void 0!==e){var i=g.getRemovedIds(t,e);if(i.length===e.length)v.rowsManager.removeAll(),v.api.data.raise.clear();else{for(var n=0,s=i.length;n<s;n++){var a=i[n];v.rowsManager.removeRow(a)}var o=[];for(n=0,s=e.length;n<s;n++)i.indexOf(e[n].id)>-1&&o.push(e[n]);v.api.data.raise.remove(o)}}if(void 0!==t){var r=function(t,e){if(void 0===e||t.length!==e.length)return!0;for(var i=0,n=t.length;i<n;i++)if(t[i].id!==e[i].id)return!0;return!1}(t,e);r&&v.rowsManager.resetNonModelLists();for(var l=0,d=t.length;l<d;l++){var h=t[l];v.rowsManager.addRow(h,r)}v.api.data.raise.change(t,e),v.api.data.raise.load(t)}})};return v.prototype.getDateByPosition=function(t,e,i){var n=this.columnsManager.getColumnByPosition(t,i);if(void 0!==n){var s,a;if(e)if(this.shiftKey)if(void 0!==this.shiftColumnMagnetValue&&void 0!==this.shiftColumnMagnetUnit)s=this.shiftColumnMagnetValue,a=this.shiftColumnMagnetUnit;else{var o,r,l,d=this.options.value("viewScale");(d=d.trim())&&(l=d.split(" ")),l&&l.length>1?(o=parseFloat(l[0]),r=m.normalizeUnits(l[l.length-1])):(o=1,r=m.normalizeUnits(d)),s=.25*o,a=r}else s=this.columnMagnetValue,a=this.columnMagnetUnit;return n.getDateByPosition(t-n.left,s,a,this.options.value("timeFramesMagnet"))}},v.prototype.getBodyAvailableWidth=function(){var t=this.getWidth()-this.side.getWidth()-(void 0!==this.scroll.getBordersWidth()?this.scroll.getBordersWidth():0);return t-=1},v.prototype.getPositionByDate=function(t,e){if(void 0!==t){m.isMoment(m)||(t=m(t));var i=this.columnsManager.getColumnByDate(t,e);return void 0!==i?i.getPositionByDate(t):void 0}},v.prototype.loadData=function(t){if(angular.isArray(t)||(t=void 0!==t?[t]:[]),void 0===this.$scope.data)this.$scope.data=t;else for(var e=0,i=t.length;e<i;e++){var n=t[e],s=g.indexOfId(this.$scope.data,n.id);s>-1?this.$scope.data[s]=n:this.$scope.data.push(n)}var a=this.side.getWidth();a>0&&this.options.set("sideWidth",a)},v.prototype.getData=function(){return this.$scope.data},v.prototype.removeData=function(t){if(angular.isArray(t)||(t=void 0!==t?[t]:[]),void 0!==this.$scope.data)for(var e=0,i=t.length;e<i;e++){var n=t[e],s=g.indexOfId(this.$scope.data,n.id);if(s>-1)if(void 0===n.tasks||0===n.tasks.length)this.$scope.data.splice(s,1);else for(var a=this.$scope.data[s],o=0,r=n.tasks.length;o<r;o++){var l=n.tasks[o],d=g.indexOfId(a.tasks,l.id);d>-1&&a.tasks.splice(d,1)}}},v.prototype.clearData=function(){this.$scope.data=void 0},v.prototype.getWidth=function(){return this.$scope.ganttElementWidth},v.prototype.initialized=function(){this.api.core.raise.ready(this.api),this.rendered=!0,this.columnsManager.generateColumns();var t=this;f(function(){var e=t.side.getWidth();e>0&&t.options.set("sideWidth",e),t.api.core.raise.rendered(t.api)})},v}])}(),function(){"use strict";angular.module("gantt").factory("GanttObjectModel",["ganttUtils","moment",function(t,e){var i=function(t){this.api=t,this.api.registerEvent("tasks","clean"),this.api.registerEvent("rows","clean"),this.api.registerEvent("timespans","clean")};return i.prototype.cleanTask=function(i){void 0===i.id&&(i.id=t.randomUuid()),void 0===i.from||e.isMoment(i.from)||(i.from=e(i.from)),void 0===i.to||e.isMoment(i.to)||(i.to=e(i.to)),this.api.tasks.raise.clean(i)},i.prototype.cleanRow=function(i){void 0===i.id&&(i.id=t.randomUuid()),void 0===i.from||e.isMoment(i.from)||(i.from=e(i.from)),void 0===i.to||e.isMoment(i.to)||(i.to=e(i.to)),this.api.rows.raise.clean(i)},i.prototype.cleanTimespan=function(i){void 0===i.id&&(i.id=t.randomUuid()),void 0===i.from||e.isMoment(i.from)||(i.from=e(i.from)),void 0===i.to||e.isMoment(i.to)||(i.to=e(i.to)),this.api.timespans.raise.clean(i)},i}])}(),function(){"use strict";angular.module("gantt").factory("GanttRow",["GanttTask","moment","$filter",function(t,e,i){var n=function(t,e){this.rowsManager=t,this.model=e,this.from=void 0,this.to=void 0,this.tasksMap={},this.tasks=[],this.filteredTasks=[],this.visibleTasks=[]};return n.prototype.addTaskImpl=function(t,e){this.tasksMap[t.model.id]=t,this.tasks.push(t),e||(void 0===this.model.tasks&&(this.model.tasks=[]),-1===this.model.tasks.indexOf(t.model)&&this.model.tasks.push(t.model))},n.prototype.addTask=function(e,i){var n,s=!1;if(this.rowsManager.gantt.objectModel.cleanTask(e),e.id in this.tasksMap){if((n=this.tasksMap[e.id]).model===e)return n;n.model=e,s=!0}else n=new t(this,e),this.addTaskImpl(n,i);return this.sortTasks(),this.setFromToByTask(n),i||(s?this.rowsManager.gantt.api.tasks.raise.change(n):this.rowsManager.gantt.api.tasks.raise.add(n)),n},n.prototype.moveTaskToRow=function(t,e){var i=t.row;i.removeTask(t.model.id,e,!0),t.row=this,this.addTaskImpl(t,e),this.sortTasks(),this.setFromToByTask(t),t.updatePosAndSize(),this.updateVisibleTasks(),i.$scope.$digest(),t.row.$scope.$digest(),this.rowsManager.gantt.api.tasks.raise.viewRowChange(t,i),e||this.rowsManager.gantt.api.tasks.raise.rowChange(t,i)},n.prototype.updateVisibleTasks=function(){var t=this.rowsManager.gantt.options.value("filterTask");if(t){"object"==typeof t&&(t={model:t});var e=this.rowsManager.gantt.options.value("filterTaskComparator");"function"==typeof e&&(e=function(t,i){return e(t.model,i.model)}),this.filteredTasks=i("filter")(this.tasks,t,e)}else this.filteredTasks=this.tasks.slice(0);this.visibleTasks=i("ganttTaskLimit")(this.filteredTasks,this.rowsManager.gantt)},n.prototype.updateTasksPosAndSize=function(){for(var t=0,e=this.tasks.length;t<e;t++)this.tasks[t].updatePosAndSize()},n.prototype.removeTask=function(t,e,i){if(t in this.tasksMap){var n,s,a=this.tasksMap[t];for(s=this.tasks.length-1;s>=0;s--)if((n=this.tasks[s]).model.id===t){this.tasks.splice(s,1),this.from-n.model.from!=0&&this.to-n.model.to!=0||this.setFromTo();break}for(s=this.filteredTasks.length-1;s>=0;s--)if((n=this.filteredTasks[s]).model.id===t){this.filteredTasks.splice(s,1);break}for(s=this.visibleTasks.length-1;s>=0;s--)if((n=this.visibleTasks[s]).model.id===t){this.visibleTasks.splice(s,1);break}if(!e){if(delete this.tasksMap[t],void 0!==this.model.tasks){var o=this.model.tasks.indexOf(a.model);o>-1&&this.model.tasks.splice(o,1)}i||this.rowsManager.gantt.api.tasks.raise.remove(a)}return a}},n.prototype.removeAllTasks=function(){this.from=void 0,this.to=void 0,this.tasksMap={},this.tasks=[],this.filteredTasks=[],this.visibleTasks=[]},n.prototype.setFromTo=function(){this.from=void 0,this.to=void 0;for(var t=0,e=this.tasks.length;t<e;t++)this.setFromToByTask(this.tasks[t])},n.prototype.setFromToByTask=function(t){this.setFromToByValues(t.model.from,t.model.to)},n.prototype.setFromToByValues=function(t,i){void 0!==t&&(void 0===this.from?this.from=e(t):t<this.from&&(this.from=e(t))),void 0!==i&&(void 0===this.to?this.to=e(i):i>this.to&&(this.to=e(i)))},n.prototype.sortTasks=function(){this.tasks.sort(function(t,e){return t.left-e.left})},n.prototype.clone=function(){for(var t=new n(this.rowsManager,angular.copy(this)),e=0,i=this.tasks.length;e<i;e++)t.addTask(this.tasks[e].model);return t},n}])}(),function(){"use strict";angular.module("gantt").factory("GanttRowHeader",[function(){return function(t){this.gantt=t}}])}(),function(){"use strict";angular.module("gantt").factory("GanttRowsManager",["GanttRow","ganttArrays","$filter","$timeout","moment",function(t,e,i,n,s){var a=function(t){var e=this;this.gantt=t,this.rowsMap={},this.rows=[],this.sortedRows=[],this.filteredRows=[],this.customFilteredRows=[],this.visibleRows=[],this.rowsTaskWatchers=[],this._defaultFilterImpl=function(t,e,n){return i("filter")(t,e,n)},this.filterImpl=this._defaultFilterImpl,this.customRowSorters=[],this.customRowFilters=[],this.gantt.$scope.$watchGroup(["filterTask","filterTaskComparator"],function(t,i){t!==i&&e.updateVisibleTasks()}),this.gantt.$scope.$watchGroup(["filterRow","filterRowComparator"],function(t,i){t!==i&&e.updateVisibleRows()}),this.gantt.$scope.$watch("sortMode",function(t,i){t!==i&&e.sortRows()});var s=this.gantt.scroll.isVScrollbarVisible();this.gantt.$scope.$watchGroup(["maxHeight","gantt.rowsManager.visibleRows.length"],function(t,i){t!==i&&n(function(){var t=e.gantt.scroll.isVScrollbarVisible();t!==s&&(s=t,e.gantt.columnsManager.updateColumnsMeta())})}),this.gantt.api.registerMethod("rows","sort",a.prototype.sortRows,this),this.gantt.api.registerMethod("rows","applySort",a.prototype.applySort,this),this.gantt.api.registerMethod("rows","refresh",a.prototype.updateVisibleObjects,this),this.gantt.api.registerMethod("rows","removeRowSorter",a.prototype.removeCustomRowSorter,this),this.gantt.api.registerMethod("rows","addRowSorter",a.prototype.addCustomRowSorter,this),this.gantt.api.registerMethod("rows","removeRowFilter",a.prototype.removeCustomRowFilter,this),this.gantt.api.registerMethod("rows","addRowFilter",a.prototype.addCustomRowFilter,this),this.gantt.api.registerMethod("rows","setFilterImpl",a.prototype.setFilterImpl,this),this.gantt.api.registerEvent("tasks","add"),this.gantt.api.registerEvent("tasks","change"),this.gantt.api.registerEvent("tasks","viewChange"),this.gantt.api.registerEvent("tasks","rowChange"),this.gantt.api.registerEvent("tasks","viewRowChange"),this.gantt.api.registerEvent("tasks","remove"),this.gantt.api.registerEvent("tasks","filter"),this.gantt.api.registerEvent("tasks","displayed"),this.gantt.api.registerEvent("rows","add"),this.gantt.api.registerEvent("rows","change"),this.gantt.api.registerEvent("rows","remove"),this.gantt.api.registerEvent("rows","move"),this.gantt.api.registerEvent("rows","displayed"),this.gantt.api.registerEvent("rows","filter"),this.updateVisibleObjects()};return a.prototype.resetNonModelLists=function(){this.rows=[],this.sortedRows=[],this.filteredRows=[],this.customFilteredRows=[],this.visibleRows=[]},a.prototype.addRow=function(i,n){var s,a,o,r=!1;if(this.gantt.objectModel.cleanRow(i),i.id in this.rowsMap){if(s=this.rowsMap[i.id],n&&(this.rows.push(s),this.sortedRows.push(s),this.filteredRows.push(s),this.customFilteredRows.push(s),this.visibleRows.push(s)),s.model===i)return;var l=e.getRemovedIds(i.tasks,s.model.tasks);for(a=0,o=l.length;a<o;a++){var d=l[a];s.removeTask(d)}s.model=i,r=!0}else s=new t(this,i),this.rowsMap[i.id]=s,this.rows.push(s),this.sortedRows.push(s),this.filteredRows.push(s),this.customFilteredRows.push(s),this.visibleRows.push(s);if(void 0!==i.tasks&&i.tasks.length>0){for(a=0,o=i.tasks.length;a<o;a++){var h=i.tasks[a];s.addTask(h)}s.updateVisibleTasks()}if(r?this.gantt.api.rows.raise.change(s):this.gantt.api.rows.raise.add(s),!r){var u=this.gantt.$scope.$watchCollection(function(){return i.tasks},function(t,i){if(t!==i){var n,a,o=e.getRemovedIds(t,i);for(n=0,a=o.length;n<a;n++){var r=o[n];s.removeTask(r)}if(void 0!==t){for(n=0,a=t.length;n<a;n++){var l=t[n];s.addTask(l)}s.updateVisibleTasks()}}});this.rowsTaskWatchers.push(u)}return r},a.prototype.removeRow=function(t){if(t in this.rowsMap){var i;delete this.rowsMap[t];var n=e.indexOfId(this.rows,t,["model","id"]);if(n>-1){i=this.rows.splice(n,1)[0];var s=this.rowsTaskWatchers.splice(n,1)[0];s&&s()}return e.removeId(this.sortedRows,t,["model","id"]),e.removeId(this.filteredRows,t,["model","id"]),e.removeId(this.customFilteredRows,t,["model","id"]),e.removeId(this.visibleRows,t,["model","id"]),void this.gantt.api.rows.raise.remove(i)}},a.prototype.removeAll=function(){this.rowsMap={},this.rows=[],this.sortedRows=[],this.filteredRows=[],this.customFilteredRows=[],this.visibleRows=[];for(var t=0,e=this.rowsTaskWatchers.length;t<e;t++){(0,this.rowsTaskWatchers[t])()}this.rowsTaskWatchers=[]},a.prototype.sortRows=function(){var t=this.gantt.options.value("sortMode");if(void 0!==t){var e=!1;angular.isString(t)&&"-"===t.charAt(0)&&(e=!0,t=t.substr(1));var n=i("orderBy");this.sortedRows=n(this.rows,t,e)}else this.sortedRows=this.rows.slice();this.sortedRows=this.applyCustomRowSorters(this.sortedRows),this.updateVisibleRows()},a.prototype.removeCustomRowSorter=function(t){var e=this.customRowSorters.indexOf(t);e>-1&&this.customRowSorters.splice(e,1)},a.prototype.addCustomRowSorter=function(t){this.customRowSorters.push(t)},a.prototype.applyCustomRowSorters=function(t){for(var e=0;e<this.customRowSorters.length;e++)t=this.customRowSorters[e](t);return t},a.prototype.applySort=function(){var t=this.gantt.$scope.data;t.splice(0,t.length);for(var e=[],i=0,n=this.sortedRows.length;i<n;i++)t.push(this.sortedRows[i].model),e.push(this.sortedRows[i]);this.rows=e},a.prototype.moveRow=function(t,i){void 0!==this.gantt.options.value("sortMode")&&(this.applySort(),this.gantt.options.set("sortMode",void 0));var n=this.rows.indexOf(i),s=this.rows.indexOf(t);n>-1&&s>-1&&n!==s&&(e.moveToIndex(this.rows,s,n),e.moveToIndex(this.rowsTaskWatchers,s,n),e.moveToIndex(this.gantt.$scope.data,s,n),this.gantt.api.rows.raise.change(t),this.gantt.api.rows.raise.move(t,s,n),this.updateVisibleObjects(),this.sortRows())},a.prototype.updateVisibleObjects=function(){this.updateVisibleRows(),this.updateVisibleTasks()},a.prototype.updateVisibleRows=function(){var t=this.filteredRows,e=this.gantt.options.value("filterRow");if(e){"object"==typeof e&&(e={model:e});var i=this.gantt.options.value("filterRowComparator");if("function"==typeof i){var n=this.gantt;i=function(t,e){return n.options.value("filterRowComparator")(t,e)}}this.filteredRows=this.filterImpl(this.sortedRows,e,i)}else this.filteredRows=this.sortedRows.slice(0);var s=!angular.equals(t,this.filteredRows);this.customFilteredRows=this.applyCustomRowFilters(this.filteredRows),this.visibleRows=this.customFilteredRows,this.gantt.api.rows.raise.displayed(this.sortedRows,this.filteredRows,this.visibleRows),s&&this.gantt.api.rows.raise.filter(this.sortedRows,this.filteredRows)},a.prototype.removeCustomRowFilter=function(t){var e=this.customRowFilters.indexOf(t);e>-1&&this.customRowFilters.splice(e,1)},a.prototype.addCustomRowFilter=function(t){this.customRowFilters.push(t)},a.prototype.applyCustomRowFilters=function(t){for(var e=0;e<this.customRowFilters.length;e++)t=this.customRowFilters[e](t);return t},a.prototype.setFilterImpl=function(t){this.filterImpl=t||this._defaultFilterImpl},a.prototype.updateVisibleTasks=function(){for(var t=[],e=[],i=[],n=[],s=0;s<this.rows.length;s++){var a=this.rows[s];t=t.concat(a.filteredTasks),a.updateVisibleTasks(),e=e.concat(a.filteredTasks),n=n.concat(a.visibleTasks),i=i.concat(a.tasks)}this.gantt.api.tasks.raise.displayed(i,e,n),!angular.equals(t,e)&&this.gantt.api.tasks.raise.filter(i,e,n)},a.prototype.updateTasksPosAndSize=function(){for(var t=0,e=this.rows.length;t<e;t++)this.rows[t].updateTasksPosAndSize()},a.prototype.getExpandedFrom=function(t){for(var e=t=t?s(t):t,i=0;i<this.rows.length;i++)(void 0===e||e>this.rows[i].from)&&(e=this.rows[i]);return e&&(!t||e<t)?e:t},a.prototype.getExpandedTo=function(t){for(var e=t=t?s(t):t,i=0;i<this.rows.length;i++)(void 0===e||e<this.rows[i].to)&&(e=this.rows[i].to);var n=this.gantt.options.value("toDate");return e&&(!n||e>n)?e:t},a.prototype.getDefaultFrom=function(){for(var t,e=0;e<this.rows.length;e++)(void 0===t||this.rows[e].from<t)&&(t=this.rows[e].from);return t},a.prototype.getDefaultTo=function(){for(var t,e=0;e<this.rows.length;e++)(void 0===t||this.rows[e].to>t)&&(t=this.rows[e].to);return t},a}])}(),function(){"use strict";angular.module("gantt").factory("GanttTask",["moment",function(t){var e=function(t,e){this.rowsManager=t.rowsManager,this.row=t,this.model=e,this.truncatedLeft=!1,this.truncatedRight=!1};return e.prototype.isMilestone=function(){return!this.model.to||this.model.from-this.model.to==0},e.prototype.isOutOfRange=function(){var t=this.rowsManager.gantt.columnsManager.getFirstColumn(),e=this.rowsManager.gantt.columnsManager.getLastColumn();return void 0===t||this.model.to<t.date||void 0===e||this.model.from>e.endDate},e.prototype.updatePosAndSize=function(){var e=this.left,i=this.width,n=this.truncatedRight,s=this.truncatedLeft;!this.isMoving&&this.isOutOfRange()?(this.modelLeft=void 0,this.modelWidth=void 0):(this.modelLeft=this.rowsManager.gantt.getPositionByDate(this.model.from),this.modelWidth=this.rowsManager.gantt.getPositionByDate(this.model.to)-this.modelLeft);var a=this.rowsManager.gantt.columnsManager.getLastColumn(),o=a?a.left+a.width:0,r=this.modelLeft,l=this.modelWidth;this.rowsManager.gantt.options.value("daily")&&(r=this.rowsManager.gantt.getPositionByDate(t(this.model.from).startOf("day")),l=this.rowsManager.gantt.getPositionByDate(t(this.model.to).endOf("day"))-r),void 0===r||void 0===l||r+l<0||r>o?(this.left=void 0,this.width=void 0):(this.left=Math.min(Math.max(r,0),this.rowsManager.gantt.width),r<0?(this.truncatedLeft=!0,l+r>this.rowsManager.gantt.width?(this.truncatedRight=!0,this.width=this.rowsManager.gantt.width):(this.truncatedRight=!1,this.width=l+r)):l+r>this.rowsManager.gantt.width?(this.truncatedRight=!0,this.truncatedLeft=!1,this.width=this.rowsManager.gantt.width-r):(this.truncatedLeft=!1,this.truncatedRight=!1,this.width=l),this.width<0&&(this.left=this.left+this.width,this.width=-this.width)),this.updateView(),this.rowsManager.gantt.isRefreshingColumns||e===this.left&&i===this.width&&n===this.truncatedRight&&s===this.truncatedLeft||this.rowsManager.gantt.api.tasks.raise.viewChange(this)},e.prototype.updateView=function(){if(this.$element)if(void 0===this.left||void 0===this.width)this.$element.css("display","none");else{if(this.$element.css({left:this.left+"px",width:this.width+"px",display:""}),this.model.priority>0)for(var t=this.model.priority,e=this.$element.children(),i=0;i<e.length;i++)angular.element(e[i]).css("z-index",t);this.$element.toggleClass("gantt-task-milestone",this.isMilestone())}},e.prototype.getBackgroundElement=function(){if(void 0!==this.$element){var t=this.$element[0].querySelector(".gantt-task-background");return void 0!==t&&(t=angular.element(t)),t}},e.prototype.getContentElement=function(){if(void 0!==this.$element){var t=this.$element[0].querySelector(".gantt-task-content");return void 0!==t&&(t=angular.element(t)),t}},e.prototype.getForegroundElement=function(){if(void 0!==this.$element){var t=this.$element[0].querySelector(".gantt-task-foreground");return void 0!==t&&(t=angular.element(t)),t}},e.prototype.setFrom=function(t,e){this.model.from=this.rowsManager.gantt.getDateByPosition(t,e),this.row.setFromTo(),this.updatePosAndSize()},e.prototype.setTo=function(t,e){this.model.to=this.rowsManager.gantt.getDateByPosition(t,e),this.row.setFromTo(),this.updatePosAndSize()},e.prototype.moveTo=function(t,e){var i,n;t>this.modelLeft?(this.model.to=this.rowsManager.gantt.getDateByPosition(t+this.modelWidth,e),n=(i=this.rowsManager.gantt.getPositionByDate(this.model.to))-this.modelWidth,this.model.from=this.rowsManager.gantt.getDateByPosition(n,!1)):(this.model.from=this.rowsManager.gantt.getDateByPosition(t,e),i=(n=this.rowsManager.gantt.getPositionByDate(this.model.from))+this.modelWidth,this.model.to=this.rowsManager.gantt.getDateByPosition(i,!1)),this.row.setFromTo(),this.updatePosAndSize()},e.prototype.clone=function(){return new e(this.row,angular.copy(this.model))},e}])}(),function(){"use strict";angular.module("gantt").factory("GanttBody",["GanttBodyColumns","GanttBodyRows","GanttBodyBackground","GanttBodyForeground",function(t,e,i,n){return function(s){this.gantt=s,this.background=new i(this),this.foreground=new n(this),this.columns=new t(this),this.rows=new e(this)}}])}(),function(){"use strict";angular.module("gantt").factory("GanttBodyBackground",[function(){return function(t){this.body=t}}])}(),function(){"use strict";angular.module("gantt").factory("GanttBodyColumns",[function(){return function(t){this.body=t}}])}(),function(){"use strict";angular.module("gantt").factory("GanttBodyForeground",[function(){return function(t){this.body=t}}])}(),function(){"use strict";angular.module("gantt").factory("GanttBodyRows",[function(){return function(t){this.body=t}}])}(),function(){"use strict";angular.module("gantt").factory("GanttHeader",["GanttHeaderColumns",function(t){return function(e){this.gantt=e,this.columns=new t(this),this.getHeight=function(){return this.$element[0].offsetHeight}}}])}(),function(){"use strict";angular.module("gantt").factory("GanttHeaderColumns",[function(){return function(t){this.$element=t}}])}(),function(){"use strict";angular.module("gantt").factory("GanttScroll",[function(){var t=function(e){this.gantt=e,this.gantt.api.registerEvent("scroll","scroll"),this.gantt.api.registerMethod("scroll","to",t.prototype.scrollTo,this),this.gantt.api.registerMethod("scroll","toDate",t.prototype.scrollToDate,this),this.gantt.api.registerMethod("scroll","left",t.prototype.scrollToLeft,this),this.gantt.api.registerMethod("scroll","right",t.prototype.scrollToRight,this),this.gantt.api.registerMethod("scroll","setWidth",t.prototype.setWidth,this)};return t.prototype.getScrollLeft=function(){return void 0===this.$element?void 0:(void 0===this.cachedScrollLeft&&(this.cachedScrollLeft=this.$element[0].scrollLeft),this.cachedScrollLeft)},t.prototype.getScrollWidth=function(){return void 0===this.$element?void 0:this.$element[0].scrollWidth},t.prototype.getWidth=function(){return void 0===this.$element?void 0:this.$element[0].offsetWidth},t.prototype.setWidth=function(t){this.$element[0]&&(this.$element[0].offsetWidth=t)},t.prototype.getBordersWidth=function(){if(void 0!==this.$element){if(this.$element[0].clientWidth)return this.$element[0].offsetWidth-this.$element[0].clientWidth;var t=window.getComputedStyle(this.$element[0]).getPropertyValue("border-left-width")?window.getComputedStyle(this.$element[0]).getPropertyValue("border-left-width").match(/\d+/)[0]:0,e=window.getComputedStyle(this.$element[0]).getPropertyValue("border-right-width")?window.getComputedStyle(this.$element[0]).getPropertyValue("border-right-width").match(/\d+/)[0]:0;return parseInt(t)+parseInt(e)}},t.prototype.getBordersHeight=function(){return void 0===this.$element?void 0:this.$element[0].offsetHeight-this.$element[0].clientHeight},t.prototype.isVScrollbarVisible=function(){if(void 0!==this.$element)return this.$element[0].scrollHeight>this.$element[0].offsetHeight},t.prototype.isHScrollbarVisible=function(){if(void 0!==this.$element)return this.$element[0].scrollWidth>this.$element[0].offsetWidth},t.prototype.scrollTo=function(t){this.$element[0].scrollLeft=t,this.$element.triggerHandler("scroll")},t.prototype.scrollToLeft=function(t){this.$element[0].scrollLeft-=t,this.$element.triggerHandler("scroll")},t.prototype.scrollToRight=function(t){this.$element[0].scrollLeft+=t,this.$element.triggerHandler("scroll")},t.prototype.scrollToDate=function(t){var e=this.gantt.getPositionByDate(t);void 0!==e&&(this.$element[0].scrollLeft=e-this.$element[0].offsetWidth/2)},t}])}(),function(){"use strict";angular.module("gantt").factory("GanttSide",[function(){var t=function(t){this.gantt=t};return t.prototype.getWidth=function(){if(this.gantt.options.value("showSide")){var t=this.gantt.options.value("sideWidth");if(void 0===t&&void 0!==this.$element&&void 0!==this.$element.css("width")&&this.$element.css("width",""),void 0!==this.$element&&(t=this.$element[0].offsetWidth),void 0!==t)return t}return 0},t.prototype.show=function(t){void 0!==this.$element&&this.$element.toggleClass("ng-hide",!t)},t.prototype.isShown=function(){if(void 0!==this.$element)return!this.$element.hasClass("ng-hide")},t}])}(),function(){"use strict";angular.module("gantt").factory("GanttTimespan",[function(){var t=function(t,e){this.gantt=t,this.model=e};return t.prototype.updatePosAndSize=function(){this.modelLeft=this.gantt.getPositionByDate(this.model.from),this.modelWidth=this.gantt.getPositionByDate(this.model.to)-this.modelLeft;var t=this.gantt.columnsManager.getLastColumn(),e=t?t.left+t.width:0;this.modelLeft+this.modelWidth<0||this.modelLeft>e?(this.left=void 0,this.width=void 0):(this.left=Math.min(Math.max(this.modelLeft,0),this.gantt.width),this.modelLeft<0?(this.truncatedLeft=!0,this.modelWidth+this.modelLeft>this.gantt.width?(this.truncatedRight=!0,this.width=this.gantt.width):(this.truncatedRight=!1,this.width=this.modelWidth+this.modelLeft)):this.modelWidth+this.modelLeft>this.gantt.width?(this.truncatedRight=!0,this.truncatedLeft=!1,this.width=this.gantt.width-this.modelLeft):(this.truncatedLeft=!1,this.truncatedRight=!1,this.width=this.modelWidth),this.width<0&&(this.left=this.left+this.width,this.width=-this.width)),this.updateView()},t.prototype.updateView=function(){this.$element&&(void 0===this.left||void 0===this.width?this.$element.css("display","none"):(this.$element.css("display",""),this.$element.css("left",this.left+"px"),this.$element.css("width",this.width+"px")))},t.prototype.setFrom=function(t){this.from=this.gantt.getDateByPosition(t),this.updatePosAndSize()},t.prototype.setTo=function(t){this.to=this.gantt.getDateByPosition(t),this.updatePosAndSize()},t.prototype.moveTo=function(t){this.from=this.gantt.getDateByPosition(t),this.to=this.gantt.getDateByPosition(t+this.width),this.updatePosAndSize()},t.prototype.clone=function(){return new t(this.gantt,angular.copy(this.model))},t}])}(),function(){"use strict";angular.module("gantt").factory("GanttTimespansManager",["GanttTimespan",function(t){var e=function(t){var e=this;this.gantt=t,this.timespansMap={},this.timespans=[],this.gantt.$scope.$watchCollection("timespans",function(t){e.clearTimespans(),e.loadTimespans(t)}),this.gantt.api.registerMethod("timespans","load",this.loadTimespans,this),this.gantt.api.registerMethod("timespans","remove",this.removeTimespans,this),this.gantt.api.registerMethod("timespans","clear",this.clearTimespans,this),this.gantt.api.registerEvent("timespans","add"),this.gantt.api.registerEvent("timespans","remove"),this.gantt.api.registerEvent("timespans","change")};return e.prototype.loadTimespans=function(t){angular.isArray(t)||(t=void 0!==t?[t]:[]),this.gantt.$scope.timespans=t;for(var e=0,i=t.length;e<i;e++){var n=t[e];this.gantt.objectModel.cleanTimespan(n),this.loadTimespan(n)}},e.prototype.loadTimespan=function(e){var i,n=!1;return e.id in this.timespansMap?((i=this.timespansMap[e.id]).model=e,n=!0,this.gantt.api.timespans.raise.change(i)):(i=new t(this.gantt,e),this.timespansMap[e.id]=i,this.timespans.push(i),this.gantt.api.timespans.raise.add(i)),i.updatePosAndSize(),n},e.prototype.removeTimespans=function(t){angular.isArray(t)||(t=[t]);for(var e=0,i=t.length;e<i;e++){var n=t[e];this.removeTimespan(n.id)}this.updateVisibleObjects()},e.prototype.removeTimespan=function(t){if(t in this.timespansMap){var e,i;delete this.timespansMap[t];for(var n=this.timespans.length-1;n>=0;n--)if((i=this.timespans[n]).model.id===t){e=i,this.timespans.splice(n,1);break}return this.gantt.api.timespans.raise.remove(e),e}},e.prototype.clearTimespans=function(){this.timespansMap={},this.timespans=[]},e.prototype.updateTimespansPosAndSize=function(){for(var t=0,e=this.timespans.length;t<e;t++)this.timespans[t].updatePosAndSize()},e}])}(),function(){"use strict";angular.module("gantt").service("ganttArrays",[function(){return{moveToIndex:function(t,e,i){if(i>=t.length)for(var n=i-t.length;1+n--;)t.push(void 0);return t.splice(i,0,t.splice(e,1)[0]),t},getRemovedIds:function(t,e,i){var n,s;void 0===i&&(i="id");var a=[];if(void 0!==e)for(n=0,s=e.length;n<s;n++)a.push(e[n][i]);if(void 0!==t)for(n=0,s=t.length;n<s;n++){var o=t[n];if(void 0!==o[i]){var r=a.indexOf(o[i]);r>-1&&a.splice(r,1)}}return a},indexOfId:function(t,e,i){var n;if(void 0===i)i="id";else if(i instanceof Array){for(n=t.length-1;n>=0;n--){for(var s=t[n],a=0,o=i.length;a<o;a++)s=s[i[a]];if(s===e)return n}return-1}for(n=t.length-1;n>=0;n--)if(t[n][i]===e)return n;return-1},removeId:function(t,e,i){var n=this.indexOfId(t,e,i);if(n>-1)return t.splice(n,1)[0]},remove:function(t,e){var i=t.indexOf(e);return i>-1&&(t.splice(i,1),!0)}}}])}(),function(){"use strict";angular.module("gantt").service("ganttBinarySearch",[function(){return{getIndicesOnly:function(t,e,i,n){for(var s=-1,a=t.length;a-s>1;){var o=Math.floor((s+a)/2);(n?i(t[o])<e:i(t[o])<=e)?s=o:a=o}return n||void 0===t[s]||i(t[s])!==e||(a=s),[s,a]},get:function(t,e,i,n){var s=this.getIndicesOnly(t,e,i,n);return[t[s[0]],t[s[1]]]}}}])}(),function(){"use strict";angular.module("gantt").factory("GanttHierarchy",[function(){return function(){var t=this,e={},i={},n={},s={},a={},o={},r=function(t,e){if(void 0!==e){var i=n[t.model.name];void 0===i&&(i=[],n[t.model.name]=i),i.push(e);var r=s[t.model.id];void 0===r&&(r=[],s[t.model.id]=r),r.push(e),a[e.model.name]=t,o[e.model.id]=t}};this.refresh=function(l){var d;e={},i={},n={},s={},a={},o={};for(var h=0;h<l.length;h++)d=l[h],e[d.model.name]=d,i[d.model.id]=d;for(h=0;h<l.length;h++){if(void 0!==(d=l[h]).model.parent){var u=e[d.model.parent];void 0===u&&(u=i[d.model.parent]),void 0!==u&&r(u,d)}if(void 0!==d.model.children)for(var c=d.model.children,g=0;g<c.length;g++){var m=c[g],p=e[m];void 0===p&&(p=i[m]),void 0!==p&&r(d,p)}}var f=[];for(h=0;h<l.length;h++)d=l[h],void 0===t.parent(d)&&f.push(d);return f},this.children=function(t){return s[t.model.id]},this.descendants=function(e){var i=[],n=t.children(e);if(i.push.apply(i,n),void 0!==n)for(var s=0;s<n.length;s++){var a=t.descendants(n[s]);i.push.apply(i,a)}return i},this.parent=function(t){return o[t.model.id]},this.ancestors=function(e){for(var i=[],n=t.parent(e);void 0!==n;)i.push(n),n=t.parent(n);return i}}}])}(),function(){"use strict";angular.module("gantt").service("ganttUtils",[function(){return{createBoundedWrapper:function(t,e){return function(){return e.apply(t,arguments)}},firstProperty:function(t,e,i){for(var n=0,s=t.length;n<s;n++){var a=t[n];if(void 0!==a&&e in a&&void 0!==a[e])return a[e]}return i},angularIndexOf:function(t,e){for(var i=0;i<t.length;i++)if(angular.equals(t[i],e))return i;return-1},random4:function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},randomUuid:function(){return this.random4()+this.random4()+"-"+this.random4()+"-"+this.random4()+"-"+this.random4()+"-"+this.random4()+this.random4()+this.random4()},newId:(t=(new Date).getTime(),function(){return t+=1})};var t}])}(),function(){"use strict";angular.module("gantt").filter("ganttColumnLimit",["ganttBinarySearch",function(t){var e=function(t){return t.left};return function(i,n){var s=n.scroll.getScrollLeft(),a=n.getWidth()-n.side.getWidth();if(a>0){var o=t.getIndicesOnly(i,s,e)[0],r=t.getIndicesOnly(i,s+a,e)[1];return i.slice(o,r)}return i.slice()}}])}(),function(){"use strict";angular.module("gantt").filter("ganttTaskLimit",[function(){return function(t,e){var i=e.columnsManager.getFirstColumn(),n=e.columnsManager.getLastColumn();if(void 0!==i&&void 0!==n){for(var s=i.date,a=n.endDate,o=[],r=e.scroll.getScrollLeft(),l=e.getWidth()-e.side.getWidth(),d=0,h=t.length;d<h;d++){var u=t[d];u.active?o.push(u):u.model.to>=s&&u.model.from<=a&&(void 0===u.left&&u.updatePosAndSize(),(!l||u.left>=r&&u.left<=r+l||u.left+u.width>=r&&u.left+u.width<=r+l||u.left<r&&u.left+u.width>r+l)&&o.push(u))}return o}return t.splice()}}])}(),function(){"use strict";angular.module("gantt").directive("ganttResizer",["$document","$parse","$timeout","ganttMouseOffset",function(t,e,i,n){return{restrict:"A",require:"^gantt",scope:{targetElement:"=ganttResizer",enabled:"@?ganttResizerEnabled"},link:function(s,a,o,r){var l=r.gantt.api,d=o.ganttResizerEventTopic;function h(){return r.gantt.options.value(o.resizerWidth)}function u(t){t!==h()&&(r.gantt.options.set(o.resizerWidth,t),void 0!==d&&l[d].raise.resize(t),i(function(){r.gantt.columnsManager.updateColumnsMeta()}))}function c(t){t.preventDefault(),u(void 0)}function g(t){s.$evalAsync(function(){var e=n.getOffsetForElement(s.targetElement[0],t),i=r.gantt.getWidth()-r.gantt.scroll.getBordersWidth();u(Math.min(Math.max(e.x,0),i))})}function m(){void 0!==d&&l[d].raise.resizeEnd(h()),t.unbind("mousemove",g),t.unbind("mouseup",m)}function p(e){e.preventDefault(),void 0!==d&&l[d].raise.resizeBegin(h()),t.on("mousemove",g),t.on("mouseup",m)}void 0===s.enabled&&(s.enabled=!0),o.$observe("ganttResizerEnabled",function(t){s.enabled=e(t)()}),s.$watch("enabled",function(t){void 0===t&&(t=!0),a.toggleClass("gantt-resizer-enabled",t),t?(a.on("dblclick",c),a.on("mousedown",p)):(a.off("dblclick",c),a.off("mousedown",p))}),s.$watch(function(){return h()},function(t,e){t!==e&&(s.targetElement.css("width",t+"px"),s.targetElement[0].offsetWidth>0&&u(s.targetElement[0].offsetWidth))}),d&&(l.registerEvent(d,"resize"),l.registerEvent(d,"resizeBegin"),l.registerEvent(d,"resizeEnd"),l.registerMethod(d,"setWidth",u,this),l.registerMethod(d,"getWidth",h,this))}}}])}(),function(){"use strict";angular.module("gantt").directive("ganttHorizontalScrollReceiver",function(){return{restrict:"A",require:"^ganttScrollManager",link:function(t,e,i,n){n.registerHorizontalReceiver(e)}}})}(),function(){"use strict";angular.module("gantt").directive("ganttScrollable",["GanttDirectiveBuilder","$timeout","ganttDebounce","moment",function(t,e,i,n){var s=new t("ganttScrollable");return s.controller=function(t,s){var a,o;t.gantt.scroll.$element=s;s.bind("scroll",i(function(){var i,r,l=s[0],d=l.scrollLeft;t.gantt.scroll.cachedScrollLeft=d,t.gantt.columnsManager.updateVisibleColumns(),t.gantt.rowsManager.updateVisibleObjects(),d<a&&0===d?(i="left",r=t.gantt.columnsManager.from):d>a&&l.offsetWidth+d>=l.scrollWidth-1&&(i="right",r=t.gantt.columnsManager.to),a=d,void 0!==r?(o&&e.cancel(o),o=e(function(){!function(e,i,s){var a=t.gantt.options.value("autoExpand");if("both"===a||!0===a||a===s){var o,r,l,d,h,u=t.gantt.options.value("viewScale");"s"===(u=u.trim()).charAt(u.length-1)&&(u=u.substring(0,u.length-1)),u&&(h=u.split(" ")),h&&h.length>1?(l=parseFloat(h[0]),d=h[h.length-1]):(l=1,d=u),"left"===s?(o=n(i).add(-5*l,d),t.fromDate=o):(r=n(i).add(5*l,d),t.toDate=r),t.gantt.api.scroll.raise.scroll(e.scrollLeft,i,s)}}(l,r,i)},300)):t.gantt.api.scroll.raise.scroll(d)},5)),t.getScrollableCss=function(){var e={},i=t.gantt.options.value("maxHeight");i>0&&(e["max-height"]=i-t.gantt.header.getHeight()+"px",e["overflow-y"]="auto",t.gantt.scroll.isVScrollbarVisible()&&(e["border-right"]="none"));var n=this.gantt.options.value("columnWidth"),s=0!==t.gantt.width&&t.gantt.width<t.gantt.getWidth()-t.gantt.side.getWidth();return void 0!==n&&s&&(e.width=t.gantt.width+this.gantt.scroll.getBordersWidth()+"px"),e}},s.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttScrollManager",function(){return{restrict:"A",scope:{},controller:["$scope",function(t){t.horizontal=[],t.vertical=[],this.registerVerticalReceiver=function(e){e.css("position","relative"),t.vertical.push(e[0])},this.registerHorizontalReceiver=function(e){e.css("position","relative"),t.horizontal.push(e[0])},this.getHorizontalRecievers=function(){return t.horizontal},this.getVerticalRecievers=function(){return t.vertical}}]}})}(),function(){"use strict";angular.module("gantt").directive("ganttScrollSender",[function(){return{restrict:"A",require:["^gantt","^ganttScrollManager"],link:function(t,e,i,n){var s=e[0];e.bind("scroll",function(){var t,e,i=n[1].getVerticalRecievers();for(t=0,e=i.length;t<e;t++){var a=i[t];a.parentNode.scrollTop!==s.scrollTop&&(a.parentNode.scrollTop=s.scrollTop)}var o=n[1].getHorizontalRecievers();for(t=0,e=o.length;t<e;t++){var r=o[t];r.parentNode.scrollLeft!==s.scrollLeft&&(r.parentNode.scrollLeft=s.scrollLeft)}}),t.$watch(function(){return n[0].gantt.width},function(t,e){if(t!==e)for(var i=n[1].getHorizontalRecievers(),s=0,a=i.length;s<a;s++){i[s].style.width=t+"px"}})}}}])}(),function(){"use strict";angular.module("gantt").directive("ganttVerticalScrollReceiver",function(){return{restrict:"A",require:"^ganttScrollManager",link:function(t,e,i,n){n.registerVerticalReceiver(e)}}})}(),function(){"use strict";angular.module("gantt").directive("ganttElementHeightListener",[function(){return{restrict:"A",controller:["$scope","$element","$attrs",function(t,e,i){var n=i.ganttElementHeightListener;""===n&&(n="ganttElementHeight");for(var s=t;0===n.indexOf("$parent.");)n=n.substring("$parent.".length),s=s.$parent;s.$watch(function(){return e[0].offsetHeight},function(t){t>0&&(s[n]=t)})}]}}])}(),function(){"use strict";angular.module("gantt").directive("ganttElementWidthListener",[function(){return{restrict:"A",controller:["$scope","$element","$attrs",function(t,e,i){var n=i.ganttElementWidthListener;""===n&&(n="ganttElementWidth");for(var s=t;0===n.indexOf("$parent.");)n=n.substring("$parent.".length),s=s.$parent;s.$watch(function(){return e[0].offsetWidth},function(t){t>0&&(s[n]=t)})}]}}])}(),function(){"use strict";angular.module("gantt").directive("ganttBody",["GanttDirectiveBuilder",function(t){var e=new t("ganttBody");return e.controller=function(t,e){t.gantt.body.$element=e,t.gantt.body.$scope=t},e.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttBodyBackground",["GanttDirectiveBuilder",function(t){var e=new t("ganttBodyBackground");return e.controller=function(t,e){t.gantt.body.background.$element=e,t.gantt.body.background.$scope=t},e.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttBodyColumns",["GanttDirectiveBuilder",function(t){var e=new t("ganttBodyColumns");return e.controller=function(t,e){t.gantt.body.columns.$element=e,t.gantt.body.background.$scope=t},e.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttBodyForeground",["GanttDirectiveBuilder",function(t){var e=new t("ganttBodyForeground");return e.controller=function(t,e){t.gantt.body.foreground.$element=e,t.gantt.body.foreground.$scope=t},e.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttBodyRows",["GanttDirectiveBuilder",function(t){var e=new t("ganttBodyRows");return e.controller=function(t,e){t.gantt.body.rows.$element=e,t.gantt.body.rows.$scope=t},e.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttColumn",["GanttDirectiveBuilder",function(t){var e=new t("ganttColumn");return e.controller=function(t,e){t.column.$element=e,t.column.$scope=t,t.column.updateView()},e.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttColumnHeader",["GanttDirectiveBuilder",function(t){var e=new t("ganttColumnHeader");return e.controller=function(t,e){t.column.$element=e,t.column.$scope=t,t.column.updateView()},e.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttHeader",["GanttDirectiveBuilder",function(t){var e=new t("ganttHeader");return e.controller=function(t,e){t.gantt.header.$element=e,t.gantt.header.$scope=t},e.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttHeaderColumns",["GanttDirectiveBuilder",function(t){var e=new t("ganttHeaderColumns");return e.controller=function(t,e){t.gantt.header.columns.$element=e,t.gantt.header.columns.$scope=t},e.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttRow",["GanttDirectiveBuilder",function(t){var e=new t("ganttRow");return e.controller=function(t,e){t.row.$element=e,t.row.$scope=t},e.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttRowBackground",["GanttDirectiveBuilder",function(t){return new t("ganttRowBackground").build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttRowLabel",["GanttDirectiveBuilder",function(t){var e=new t("ganttRowLabel");return e.restrict="A",e.templateUrl=void 0,e.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttScrollableHeader",["GanttDirectiveBuilder","ganttLayout",function(t,e){var i=new t("ganttScrollableHeader");return i.controller=function(t){var i=e.getScrollBarWidth();t.getScrollableHeaderCss=function(){var e={},n=t.gantt.scroll.isVScrollbarVisible(),s=n?i:0,a=this.gantt.options.value("columnWidth"),o=0!==t.gantt.width&&t.gantt.width<t.gantt.getWidth()-t.gantt.side.getWidth();return void 0!==a&&o?e.width=t.gantt.width-s+this.gantt.scroll.getBordersWidth()+"px":n&&(e.width=t.gantt.getWidth()-t.gantt.side.getWidth()-s+"px"),e}},i.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttSide",["GanttDirectiveBuilder",function(t){var e=new t("ganttSide");return e.controller=function(t,e){t.gantt.side.$element=e,t.gantt.side.$scope=t},e.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttSideBackground",["GanttDirectiveBuilder","ganttLayout",function(t,e){var i=new t("ganttSideBackground");return i.controller=function(t){var i=e.getScrollBarHeight();t.getMaxHeightCss=function(){var e={};if(t.maxHeight){var n=t.gantt.scroll.isHScrollbarVisible()?i:0;e["max-height"]=t.maxHeight-n-t.gantt.header.getHeight()+"px"}return e}},i.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttSideContent",["GanttDirectiveBuilder",function(t){return new t("ganttSideContent").build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttTask",["GanttDirectiveBuilder","moment",function(t,e){var i=new t("ganttTask");return i.controller=function(t,i){t.task.$element=i,t.task.$scope=t,t.getTaskContent=function(){return void 0!==t.task.model.content?t.task.model.content:t.task.rowsManager.gantt.options.value("taskContent")},t.simplifyMoment=function(t){return e.isMoment(t)?t.unix():t},t.$watchGroup(["simplifyMoment(task.model.from)","simplifyMoment(task.model.to)"],function(){t.task.updatePosAndSize()})},i.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttTaskBackground",["GanttDirectiveBuilder",function(t){return new t("ganttTaskBackground").build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttTaskContent",["GanttDirectiveBuilder",function(t){return new t("ganttTaskContent").build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttTaskForeground",["GanttDirectiveBuilder",function(t){return new t("ganttTaskForeground").build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttTimeFrame",["GanttDirectiveBuilder",function(t){var e=new t("ganttTimeFrame");return e.controller=function(t,e){t.timeFrame.$element=e,t.timeFrame.$scope=t,t.timeFrame.updateView()},e.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttTimespan",["GanttDirectiveBuilder",function(t){var e=new t("ganttTimespan");return e.controller=function(t,e){t.timespan.$element=e,t.timespan.$scope=t,t.timespan.updateView()},e.build()}])}(),function(){"use strict";angular.module("gantt").factory("ganttDebounce",["$timeout",function(t){return function(e,i,n){var s=0;return function(){var a,o=this,r=arguments,l=(a=++s,function(){if(a===s)return e.apply(o,r)});return t(l,i,void 0===n||n)}}}])}(),function(){"use strict";angular.module("gantt").service("GanttDirectiveBuilder",["$templateCache",function(t){return function(e,i,n,s){var a=this;this.directiveName=e,this.templateUrl=void 0===i?"template/"+e+".tmpl.html":i,this.require=void 0===n?"^gantt":n,this.restrict=void 0===s?"E":s,this.scope=!1,this.transclude=!0,this.replace=!0,this.build=function(){var e=a.directiveName,i=a.templateUrl,n=a.controller,s={restrict:a.restrict,require:a.require,transclude:a.transclude,replace:a.replace,scope:a.scope,templateUrl:function(e,n){return void 0!==n.templateUrl&&(i=n.templateUrl),void 0!==n.template&&t.put(i,n.template),i},compile:function(){return{pre:function(t,i,n,s){t.gantt.api.directives.raise.preLink(e,t,i,n,s)},post:function(t,i,n,s){t.gantt.api.directives.raise.postLink(e,t,i,n,s)}}},controller:["$scope","$element","$attrs",function(t,i,s){var a=this;void 0!==n&&n(t,i,s,a),t.gantt.api.directives.raise.controller(e,t,i,s,a),t.$on("$destroy",function(){t.gantt.api.directives.raise.destroy(e,t,i,s,a)}),t.$applyAsync(function(){t.gantt.api.directives.raise.new(e,t,i,s,a)})}]};return i||(delete s.templateUrl,delete s.replace,delete s.transclude),s}}}])}(),function(){"use strict";angular.module("gantt").service("ganttDom",["$document",function(t){return{elementFromPoint:function(e,i){return t[0].elementFromPoint(e,i)},elementsFromPoint:function(t,e,i){for(var n,s,a,o,r=[],l=[],d=0;(n=this.elementFromPoint(t,e))&&-1===r.indexOf(n)&&null!==n&&(void 0===i||d<i);)r.push(n),l.push({value:n.style.getPropertyValue("visibility"),priority:n.style.getPropertyPriority("visibility")}),n.style.setProperty("visibility","hidden","important"),d++;for(s=0,a=l.length;s<a;s++)o=l[s],r[s].style.setProperty("visibility",o.value?o.value:"",o.priority);return r},findElementFromPoint:function(t,e,i){for(var n,s,a,o,r,l=[],d=[];(n=this.elementFromPoint(t,e))&&-1===l.indexOf(n)&&null!==n;)if(l.push(n),d.push({value:n.style.getPropertyValue("visibility"),priority:n.style.getPropertyPriority("visibility")}),n.style.setProperty("visibility","hidden","important"),0,i(n)){s=n;break}for(a=0,o=d.length;a<o;a++)r=d[a],l[a].style.setProperty("visibility",r.value?r.value:"",r.priority);return s},isElementVisible:function(t){return void 0!==t.offsetParent&&null!==t.offsetParent}}}])}(),function(){"use strict";angular.module("gantt").service("ganttEnableNgAnimate",["$injector",function(t){var e;try{e=t.get("$animate")}catch(t){}return void 0!==e?function(t,i){angular.version.major>=1&&angular.version.minor>=4?e.enabled(t,i):e.enabled(i,t)}:angular.noop}])}(),function(){"use strict";angular.module("gantt").directive("ganttBindCompileHtml",["$compile",function(t){return{restrict:"A",require:"^gantt",link:function(e,i,n,s){e.scope=s.gantt.$scope.$parent,e.$watch(function(){return e.$eval(n.ganttBindCompileHtml)},function(n){i.html(n),t(i.contents())(e)})}}}])}(),function(){"use strict";angular.module("gantt").service("ganttLayout",["$document",function(t){return{getScrollBarWidth:function(){var e=t[0].createElement("p");e.style.width="100%",e.style.height="200px";var i=t[0].createElement("div");i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.visibility="hidden",i.style.width="200px",i.style.height="150px",i.style.overflow="hidden",i.appendChild(e),t[0].body.appendChild(i);var n=e.offsetWidth;i.style.overflow="scroll";var s=e.offsetWidth;return n===s&&(s=i.clientWidth),t[0].body.removeChild(i),n-s},getScrollBarHeight:function(){var e=t[0].createElement("p");e.style.width="200px;",e.style.height="100%";var i=t[0].createElement("div");i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.visibility="hidden",i.style.width="150px",i.style.height="200px",i.style.overflow="hidden",i.appendChild(e),t[0].body.appendChild(i);var n=e.offsetHeight;i.style.overflow="scroll";var s=e.offsetHeight;return n===s&&(s=i.clientHeight),t[0].body.removeChild(i),n-s},setColumnsWidthFactor:function(t,e,i){if(t){i||(i=0);for(var n=0;n<t.length;n++){var s=t[n];s.left=e*(s.originalSize.left+i)-i,s.width=e*s.originalSize.width;for(var a=0;a<s.timeFrames.length;a++){var o=s.timeFrames[a];o.left=e*o.originalSize.left,o.width=e*o.originalSize.width}}}}}}])}(),function(){"use strict";angular.module("gantt").service("ganttMouseButton",[function(){return{getButton:function(t){return(t=t||window.event).which?t.which:void 0===t.button?1:t.button<2?1:4===t.button?2:3}}}])}(),function(){"use strict";angular.module("gantt").service("ganttMouseOffset",[function(){return{getTouch:function(t){return void 0!==t.touches?t.touches[0]:t},getOffset:function(t){return t.offsetX&&t.offsetY?{x:t.offsetX,y:t.offsetY}:t.layerX&&t.layerY?{x:t.layerX,y:t.layerY}:this.getOffsetForElement(t.target,t)},getOffsetForElement:function(t,e){var i=t.getBoundingClientRect();return{x:e.clientX-i.left,y:e.clientY-i.top}}}}])}(),function(){"use strict";angular.module("gantt").factory("ganttSmartEvent",[function(){return function(t,e,i,n){return t.$on("$destroy",function(){e.unbind(i,n)}),{bindOnce:function(){e.one(i,n)},bind:function(){e.bind(i,n)},unbind:function(){e.unbind(i,n)}}}}])}(),angular.module("gantt.templates",[]).run(["$templateCache",function(t){t.put("template/gantt.tmpl.html",'<div class="gantt unselectable" ng-cloak gantt-scroll-manager gantt-element-width-listener="ganttElementWidth">\n    <gantt-side>\n        <gantt-side-background>\n        </gantt-side-background>\n        <gantt-side-content>\n        </gantt-side-content>\n        <div gantt-resizer="gantt.side.$element" gantt-resizer-event-topic="side" gantt-resizer-enabled="{{$parent.gantt.options.value(\'allowSideResizing\')}}" resizer-width="sideWidth" class="gantt-resizer">\n            <div ng-show="$parent.gantt.options.value(\'allowSideResizing\')" class="gantt-resizer-display"></div>\n        </div>\n    </gantt-side>\n    <gantt-scrollable-header>\n        <gantt-header gantt-element-height-listener="$parent.ganttHeaderHeight">\n            <gantt-header-columns>\n                <div ng-repeat="header in gantt.columnsManager.visibleHeaders track by $index">\n                    <div class="gantt-header-row" ng-class="{\'gantt-header-row-last\': $last, \'gantt-header-row-first\': $first}">\n                        <gantt-column-header ng-repeat="column in header"></gantt-column-header>\n                    </div>\n                </div>\n            </gantt-header-columns>\n        </gantt-header>\n    </gantt-scrollable-header>\n    <gantt-scrollable>\n        <gantt-body>\n            <gantt-body-background>\n                <gantt-row-background ng-repeat="row in gantt.rowsManager.visibleRows track by row.model.id"></gantt-row-background>\n            </gantt-body-background>\n            <gantt-body-foreground>\n                <div class="gantt-current-date-line" ng-show="currentDate === \'line\' && gantt.currentDateManager.position >= 0 && gantt.currentDateManager.position <= gantt.width" ng-style="{\'left\': gantt.currentDateManager.position + \'px\' }"></div>\n            </gantt-body-foreground>\n            <gantt-body-columns>\n                <gantt-column ng-repeat="column in gantt.columnsManager.visibleColumns">\n                    <gantt-time-frame ng-repeat="timeFrame in column.visibleTimeFrames"></gantt-time-frame>\n                </gantt-column>\n            </gantt-body-columns>\n            <div ng-if="gantt.columnsManager.visibleColumns == 0" style="background-color: #808080"></div>\n            <gantt-body-rows>\n                <gantt-timespan ng-repeat="timespan in gantt.timespansManager.timespans track by timespan.model.id"></gantt-timespan>\n                <gantt-row ng-repeat="row in gantt.rowsManager.visibleRows track by row.model.id">\n                    <gantt-task ng-repeat="task in row.visibleTasks track by task.model.id">\n                    </gantt-task>\n                </gantt-row>\n            </gantt-body-rows>\n        </gantt-body>\n    </gantt-scrollable>\n\n    \x3c!-- Plugins --\x3e\n    <ng-transclude></ng-transclude>\n\n    \x3c!--\n    ******* Inline templates *******\n    You can specify your own templates by either changing the default ones below or by\n    adding an attribute template-url="<url to your template>" on the specific element.\n    --\x3e\n\n    \x3c!-- Body template --\x3e\n    <script type="text/ng-template" id="template/ganttBody.tmpl.html">\n        <div ng-transclude class="gantt-body" ng-style="{\'width\': gantt.width > 0 ? gantt.width +\'px\' : undefined}"></div>\n    <\/script>\n\n    \x3c!-- Header template --\x3e\n    <script type="text/ng-template" id="template/ganttHeader.tmpl.html">\n        <div ng-transclude class="gantt-header"\n             ng-show="gantt.columnsManager.columns.length > 0 && gantt.columnsManager.headers.length > 0"></div>\n    <\/script>\n\n    \x3c!-- Side template --\x3e\n    <script type="text/ng-template" id="template/ganttSide.tmpl.html">\n        <div ng-transclude class="gantt-side" style="width: auto;"></div>\n    <\/script>\n\n    \x3c!-- Side content template--\x3e\n    <script type="text/ng-template" id="template/ganttSideContent.tmpl.html">\n        <div class="gantt-side-content">\n        </div>\n    <\/script>\n\n    \x3c!-- Header columns template --\x3e\n    <script type="text/ng-template" id="template/ganttHeaderColumns.tmpl.html">\n        <div ng-transclude class="gantt-header-columns"\n              gantt-horizontal-scroll-receiver></div>\n    <\/script>\n\n    <script type="text/ng-template" id="template/ganttColumnHeader.tmpl.html">\n        <div class="gantt-column-header" ng-class="{\'gantt-column-header-last\': $last, \'gantt-column-header-first\': $first}">{{::column.label}}</div>\n    <\/script>\n\n    \x3c!-- Body background template --\x3e\n    <script type="text/ng-template" id="template/ganttBodyBackground.tmpl.html">\n        <div ng-transclude class="gantt-body-background"></div>\n    <\/script>\n\n    \x3c!-- Body foreground template --\x3e\n    <script type="text/ng-template" id="template/ganttBodyForeground.tmpl.html">\n        <div ng-transclude class="gantt-body-foreground"></div>\n    <\/script>\n\n    \x3c!-- Body columns template --\x3e\n    <script type="text/ng-template" id="template/ganttBodyColumns.tmpl.html">\n        <div ng-transclude class="gantt-body-columns"></div>\n    <\/script>\n\n    <script type="text/ng-template" id="template/ganttColumn.tmpl.html">\n        <div ng-transclude class="gantt-column gantt-foreground-col" ng-class="{\'gantt-column-last\': $last, \'gantt-column-first\': $first}"></div>\n    <\/script>\n\n    <script type="text/ng-template" id="template/ganttTimeFrame.tmpl.html">\n        <div class="gantt-timeframe"></div>\n    <\/script>\n\n    \x3c!-- Scrollable template --\x3e\n    <script type="text/ng-template" id="template/ganttScrollable.tmpl.html">\n        <div ng-transclude class="gantt-scrollable" gantt-scroll-sender ng-style="getScrollableCss()"></div>\n    <\/script>\n\n    <script type="text/ng-template" id="template/ganttScrollableHeader.tmpl.html">\n        <div ng-transclude class="gantt-scrollable-header" ng-style="getScrollableHeaderCss()"></div>\n    <\/script>\n\n    \x3c!-- Rows template --\x3e\n    <script type="text/ng-template" id="template/ganttBodyRows.tmpl.html">\n        <div ng-transclude class="gantt-body-rows"></div>\n    <\/script>\n\n    \x3c!-- Timespan template --\x3e\n    <script type="text/ng-template" id="template/ganttTimespan.tmpl.html">\n        <div class="gantt-timespan" ng-class="timespan.model.classes">\n        </div>\n    <\/script>\n\n    \x3c!-- Task template --\x3e\n    <script type="text/ng-template" id="template/ganttTask.tmpl.html">\n        <div class="gantt-task" ng-class="task.model.classes">\n            <gantt-task-background></gantt-task-background>\n            <gantt-task-foreground></gantt-task-foreground>\n            <gantt-task-content></gantt-task-content>\n        </div>\n    <\/script>\n\n    <script type="text/ng-template" id="template/ganttTaskBackground.tmpl.html">\n        <div class="gantt-task-background" ng-style="{\'background-color\': task.model.color}"></div>\n    <\/script>\n\n    <script type="text/ng-template" id="template/ganttTaskForeground.tmpl.html">\n        <div class="gantt-task-foreground">\n            <div ng-if="task.truncatedRight" class="gantt-task-truncated-right">&gt;</div>\n            <div ng-if="task.truncatedLeft" class="gantt-task-truncated-left">&lt;</div>\n        </div>\n    <\/script>\n\n    \x3c!-- Task content template --\x3e\n    <script type="text/ng-template" id="template/ganttTaskContent.tmpl.html">\n        <div class="gantt-task-content" unselectable="on"><span unselectable="on" gantt-bind-compile-html="getTaskContent()"/></div>\n    <\/script>\n\n\n    \x3c!-- Row background template --\x3e\n    <script type="text/ng-template" id="template/ganttRowBackground.tmpl.html">\n        <div class="gantt-row gantt-row-height"\n             ng-class="row.model.classes"\n             ng-class-odd="\'gantt-row-odd\'"\n             ng-class-even="\'gantt-row-even\'"\n             ng-style="{\'height\': row.model.height}">\n            <div class="gantt-row-background"\n                 ng-style="{\'background-color\': row.model.color}">\n            </div>\n        </div>\n    <\/script>\n\n    \x3c!-- Row template --\x3e\n    <script type="text/ng-template" id="template/ganttRow.tmpl.html">\n        <div class="gantt-row gantt-row-height"\n             ng-class="row.model.classes"\n             ng-class-odd="\'gantt-row-odd\'"\n             ng-class-even="\'gantt-row-even\'"\n             ng-style="{\'height\': row.model.height}">\n            <div ng-transclude class="gantt-row-content"></div>\n        </div>\n    <\/script>\n\n    \x3c!-- Side background template --\x3e\n    <script type="text/ng-template" id="template/ganttSideBackground.tmpl.html">\n        <div class="gantt-side-background">\n            <div class="gantt-side-background-header" ng-style="{height: $parent.ganttHeaderHeight + \'px\'}">\n                <div ng-show="$parent.ganttHeaderHeight" class="gantt-header-row gantt-side-header-row"></div>\n            </div>\n            <div class="gantt-side-background-body" ng-style="getMaxHeightCss()">\n                <div gantt-vertical-scroll-receiver>\n                    <div class="gantt-row gantt-row-height "\n                         ng-class-odd="\'gantt-row-odd\'"\n                         ng-class-even="\'gantt-row-even\'"\n                         ng-class="row.model.classes"\n                         ng-repeat="row in gantt.rowsManager.visibleRows track by row.model.id"\n                         ng-style="{\'height\': row.model.height}">\n                        <div gantt-row-label class="gantt-row-label gantt-row-background"\n                             ng-style="{\'background-color\': row.model.color}">\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    <\/script>\n</div>\n')}]);